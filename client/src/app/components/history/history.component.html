
<!-- <div  class="modal " role="dialog" tabindex="-1" id="scanFiles" style="background-color: rgba(0, 0, 0, .5);
max-width:100%;">
    <div data-dismiss="modal" style="height: 25px; width:25px; color: whitesmoke;background:rgba(0, 0, 0, 0.4)" class="close-comment">
        <i title="close" class="icon ion-ios-close-empty"></i>
    </div>
    <div style="max-width:100%;height: 100%; display: flex;justify-content: center;align-content: center;align-content: center;">
        <div style="height: 100%;width:563px;background-color: rgba(0, 0, 0, .5);overflow: hidden;position: relative;">
            <div *ngFor="let image of images; let i = index" class="image-container" [class.current-image]='currentImage === i'>
                <img style="height: 100%;width:100%;bottom:0px;top:0px" [src]=getDp(image)/>
            </div>
        </div>
    </div>
    <div style="left:12%; top:45%;position: absolute;width: 7%;" class="btn-group disposition">
        <button [disabled]='currentImage === 0' (click) = prevImage() style="width:32px;border:none;background:rgba(0, 0, 0, .2);height: 32px;border-radius: 50%;left:35%"   class="btn btn-outline-primary  dispo " >
            <i  style='position:absolute;right:36%;top:2px; font-size:large; cursor:pointer; display: inline-block;' title="Back" class="icon ion-android-arrow-back ">
            </i>
        </button>
    </div>
    <div style="left: 81%; top:45%;position: absolute; width: 7%;" class="btn-group disposition">
        <button [disabled]='currentImage === images.length-1' (click)=nextImage() style="width:32px;border:none;background:rgba(0, 0, 0, 0.4); height: 32px;border-radius: 50%;left:35%"   class="btn btn-outline-primary  dispo " >
            <i   style='position:absolute;right:36%;top:2px; font-size:large; cursor:pointer; display: inline-block;' title="Next" class="icon ion-android-arrow-forward ">
            </i>
        </button>
    </div>
</div> -->

<div style="background:rgba(0, 0, 0, 0.7); padding-right:0; "  data-dismiss="modal" class="modal" role="dialog" tabindex="-1" id="slideShow">
  <div *ngFor = 'let name of images; let i = index'
        [class] = getClass(i)
        [ngStyle] = getBackgrounds(name) >
      <img draggable="true" class="gallery-img" [src] = getImage(name) alt="" sizes="" srcset="">
  </div>
  <div data-dismiss="modal" class="btn-group disposition btn-wrap modal-close" style="top: 10px;">
      <button (click) = 'reset()' style="
        width:39px;
        border:none;
        outline:none;
        box-shadow:none;
        background:rgba(0, 0, 0, .2);
        height: 39px;border-radius: 50%;" class="btn btn-outline-primary  dispo" >
          <i  style='
              top:-3px; position:relative;
              font-size:27px;
              color: white;
              cursor:pointer;
              display: inline-block;'
              title="Close"
              class="icon ion-ios-close-empty ">
          </i>
      </button>
  </div>
  <div class="btn-group disposition btn-wrap prev">
      <button (click)= prevImg() style="width:39px;
      box-shadow:none; outline:none; border:none;
      background:rgba(0, 0, 0, .2);
      height: 39px;border-radius: 50%;"
      class="btn btn-outline-primary  dispo">
          <i style='top:2px; font-size:large;
          color: white; cursor:pointer; display: inline-block;'
          title="Back"
          class="icon ion-android-arrow-back ">
          </i>
      </button>
  </div>
  <div  class="btn-group disposition btn-wrap next">
      <button (click) = nextImg() style="
        width:39px;box-shadow:none;
        outline:none;border:none;
        background:rgba(0, 0, 0, 0.4);
        height: 39px;border-radius: 50%;"
        class="btn btn-outline-primary  dispo" >
          <i  style='
              top:2px; color: white;
              font-size:large;
              cursor:pointer;
              display: inline-block;'
              title="Next" class="icon ion-android-arrow-forward">
          </i>
      </button>
  </div>
  <div class="albumName">
    <p>Album placeholder<br><span>02/09/2020</span></p>
  </div>
</div>







<div  class="modal fade" role="dialog" tabindex="-1" id="consModal" style="border-radius:32px;max-width:841px;margin: auto;padding-top: 35px">
        <div style="max-width: 730px;border-radius:32px;" class="modal-dialog" role="document">
            <div class="modal-content" style="width:100%; height:400px;border-radius:32px;padding-left:0px;padding-right: 0px;">
                <div class="modal-body" style="border-radius:32px;padding: 0px;">
                    <div class="card card-secondary historycard midlecard profilecard" style="margin:auto;min-height:400px;border-radius:32px;width:100%;position: absolute">
                        <div data-dismiss="modal" style="height: 25px; width:25px; top:3%; cursor: pointer;  color: white(248, 248, 248); background:rgba(193, 193, 224, 0.2)" class="close-comment">
                            <i title="close" class="icon ion-ios-close-empty"></i>
                        </div>
                        <div style='padding-left: 30px;border-top-right-radius:32px;border-top-left-radius:32px;border-bottom: 0px;height:40px;margin-bottom: 30px;' class="card-header profileheader small-header">
                            <div style="left:23px;top:13px" class="timeline lastdoc priscriber headerdp small-dp">
                                <img [src]= getDp(patient.info.personal.avatar)/>
                            </div>
                            <p style="top:5px" class="patien-name small-name">
                              {{patient.info.personal.firstName + ' '+ patient.info.personal.lastName}}<span class="small-headericon"></span>
                            </p>
                            <h6 style='font-size:11px;position:absolute;color:dodgerblue; font-weight: normal; top:18px;left:75%' class="patien-name small-name">UPDATE</h6>
                        </div>
                        <div class="card-body orderbody" style="width:85%;margin:auto;">
                            <div class="steps">
                                <div style="cursor: pointer;"  title="Go to" (click)='goTo(0)' [class.curent-step]='count===0' class="step-item">
                                    <span>
                                        <h6 class="step-lebel">COMPLAIN</h6>
                                   </span>
                                    <span *ngIf="session.complains.length">
                                        <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                   </span>
                                </div>
                                <div style="cursor: pointer;" title="Go to" (click)='goTo(1)' [class.curent-step]='count===1' class="step-item">
                                    <span >
                                        <h6 class="step-lebel">HISTORY</h6>
                                    </span>
                                    <span *ngIf="session.histories.length||session.allegies.allegy">
                                        <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                   </span>
                                </div>

                                <div style="cursor: pointer;"  title="Go to" (click)='goTo(2)'  [class.curent-step]='count === 2' class="step-item">
                                    <span >
                                        <h6 class="step-lebel">VITALS</h6>
                                    </span>
                                    <span *ngIf="session.vitals.bp.systolic&&session.vitals.bp.diastolic||session.vitals.tempreture.value||session.vitals.resp.value||session.vitals.pulse.value">
                                        <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                    </span>
                                </div>
                                <div style="cursor: pointer;"  title="Go to" (click)='goTo(3)' [class.curent-step]='count===3' class="step-item">
                                    <span>
                                        <h6 class="step-lebel">LAB</h6>
                                    </span>
                                    <span *ngIf='session.tests.length||session.scans.length||session.surgeries.length'>
                                        <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                    </span>
                                </div>
                                <div style="cursor: pointer;"  title="Go to" (click)='goTo(4)' [class.curent-step]='count===4' class="step-item">
                                    <span >
                                    <h6 class="step-lebel">DIAGNOSIS</h6>
                                    </span>
                                    <span *ngIf="session.conditions.length">
                                        <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                    </span>
                                </div>
                                <div style="cursor: pointer;"  title="Go to" (click) = goTo(5) [class.curent-step] = 'count === 5' class="step-item">
                                    <span >
                                        <h6 class="step-lebel">MEDICATIONS</h6>
                                    </span>
                                    <span *ngIf="session.medications.length">
                                        <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                    </span>
                                </div>
                                <div style="cursor: pointer;"  title="Go to" (click) = goTo(6) [class.curent-step] = 'count === 6' class="step-item">
                                    <span>
                                        <h6 class="step-lebel">NOTES</h6>
                                    </span>
                                    <span *ngIf="session.note.note">
                                        <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                    </span>
                                </div>
                            </div>
                            <form *ngIf="count === 0"  style="width:60%" class="staffsform">
                                <div class="form-group">
                                    <label for="piriod" class="labelss">CHIEF COMPLAIN</label>
                                    <input (focus)="showSuggestions('complains')" (keyup)='searchComplains()' autocomplete="off" [(ngModel)]="session.complain.complain" style=" font-size:11px;" name="piriod" class="form-control patientdata inputs dataInfo">
                                    <div  *ngIf="matches.length"  class="prisOption slideIn">
                                        <ul data-simplebar class="itemsList" >
                                            <li *ngFor="let match of matches">
                                                <p (click)='selectComplains(match)' class="drugItem">{{match}}<span class="lastdept timetaken "></span>
                                                </p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="group-wrap">
                                  <div class="form-group">
                                    <label class = labelss for=weight >PIRIOD</label>
                                    <input
                                      [(ngModel)]="session.complain.duration"
                                      type=number autocomplete="off" [min]=1
                                      autocomplete=off
                                      name = piriod class='form-control input first'>
                                  </div>
                                  <div class="form-group submit-group">
                                    <label class = labelss for=weight >DURATION</label>
                                    <select [(ngModel)]="session.history.bearer"  (focus) = clearMsg()
                                    name='bearer'
                                    autocomplete="off" class=" form-control input last select">
                                        <option >d</option>
                                        <option >w</option>
                                        <option >m</option>
                                    </select>
                                    <button  (click)="addComplain()" class="btn btn-outline-primary">
                                      <i  title="Update"  class="icon ion-ios-plus-empty arrow "> </i>
                                    </button>
                                  </div>
                                </div>

                                <div *ngIf='session.complains.length' class="form-group vitals-section setGroup">
                                    <table cellspacing="0" class="data-table drugs-table" style="width:100%;left:0%;" summary="List of all items in store. ">
                                        <thead class='productHead'>
                                            <tr class="patient-th">
                                                <th class="headlbl items-head">COMPLAIN</th>
                                                <th class="headlbl patient-th items-head ">DURATION</th>
                                                <th class="headlbl patient-th items-head "></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="border-bottom: 1px solid #f8f9fa;"  *ngFor='let complain of session.complains; let i = index; let odd = odd' class="ro patient-row">
                                                <td style="padding:0px;padding-left:4px;" class="data">
                                                    {{complain.complain}}
                                                </td>
                                                <td style="padding:0px;text-align: right;padding-left:4px;" class="data">
                                                    {{complain.duration+'d'}}
                                                </td>
                                                <td style='padding:0px; padding-left:3px;text-align: center;color:darkgray' class="data">
                                                    <i (click)=removeComplain(complain.complain,i) class="icon ion-ios-trash-outline tableicon" title="Discard" style="font-size:15px; cursor: pointer;"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </form>
                            <form *ngIf="count===1"  style="width:60%;" class=" staffsform">
                                <div class="form-group">
                                    <label for="allegy" class="labelss">ALLEGIES<span style='font-size:11px; color:red;'>*</span> </label>
                                    <input 
                                        autocomplete = off
                                        (focus) = "showSuggestions('allegy')"
                                        (keyup) = searchAllegies()
                                        [(ngModel)]="session.allegies.allegy" 
                                        name="allegy" 
                                        class="form-control input"/>
                                    <div  *ngIf="matches.length && elm === 'allegy'" class="prisOption slideIn">
                                      <ul data-simplebar class="itemsList" >
                                          <li *ngFor="let match of matches">
                                              <p (click)=selectAllegy(match) class="drugItem">{{match}}<span class="lastdept timetaken "></span>
                                              </p>
                                          </li>
                                      </ul>
                                  </div>
                                </div>
                                <div class="form-group">
                                    <label for="famhistory" class="labelss"> HISTORY</label>
                                    <input
                                        (focus) = "showSuggestions('history')"
                                        (keyup) = searchHistory()
                                        autocomplete="off"
                                        [(ngModel)]="session.history.condition"
                                        name="history"
                                        class=" form-control input"/>
                                    <div *ngIf="matches.length && elm === 'history'"  class="prisOption slideIn">
                                        <ul data-simplebar class="itemsList" >
                                            <li *ngFor="let match of matches">
                                                <p (click)=selectHistory(match) class="drugItem" >{{match}}<span class="lastdept timetaken "></span>
                                                </p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="group-wrap">
                                  <div class="form-group">
                                    <label for="history" class="labelss"> DURATION</label>
                                    <input type = 'number'
                                        [(ngModel)]="session.history.duration"
                                        name="hist-duration"
                                        placeholder = 'in days'
                                        class=" form-control input first"/>
                                  </div>
                                  <div class="form-group submit-group">
                                    <label for="piriod" class="labelss">BEARER</label>
                                    <select [(ngModel)]="session.history.bearer"  (focus) = clearMsg()
                                    name='bearer'
                                    autocomplete="off" class=" form-control input last select">
                                        <option >Self</option>
                                        <option >Family</option>
                                    </select>
                                    <button class="btn btn-outline-primary" type="submit">
                                      <i *ngIf = 'session.history'  title = "Add History" (click) = 'addHistory()' class="icon ion-ios-plus-empty arrow "> </i>
                                    </button>
                                </div>
                                </div>

                                <div *ngIf='session.histories.length' class="form-group vitals-section setGroup">
                                    <table cellspacing="0" class="data-table drugs-table" style="width:100%;left:0%;" summary="List of all items in store. ">
                                        <thead class='productHead'>
                                            <tr class="patient-th">
                                                <th  class="headlbl patient-th items-head">HISTORY</th>
                                                <th  class="headlbl patient-th items-head">DURATION</th>
                                                <th  class="headlbl patient-th items-head"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="border-bottom: 1px solid #f8f9fa;"  *ngFor='let history of session.histories; let i = index; let odd = odd' class="ro patient-row">
                                                <td style="padding:0px;padding-left:4px;" class="data">
                                                    {{history.condition}}
                                                </td>
                                                <td *ngIf = 'history.duration' style="padding:0px;text-align: right;padding-left:4px;" class="data">
                                                    {{history.duration  +'d | '+ history.bearer[0]}}
                                                </td>
                                                <td *ngIf = '!history.duration' style="padding:0px;text-align: right;padding-left:4px;" class="data">
                                                    {{ '--- ' + history.bearer}}
                                                </td>
                                                <td style='padding:0px; padding-left:3px;text-align: center;color:darkgray' class="data">
                                                    <i (click)=removeHistory(history.condition,i) class="icon ion-ios-trash-outline tableicon" title="Discard" style="font-size:15px; cursor: pointer;"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </form>
                            <form *ngIf="count===3" style="width:60%;" class="staffsform">
                                <div class="form-group">
                                    <label   for="request" class="labelss">REQ. TYPE</label>
                                    <select id=select (focus) = clearMsg()
                                    (change)=getDescriptions() name='cat'
                                    [(ngModel)]="session.reqItem.category" autocomplete="off"
                                    class="form-control input select">
                                        <option>Scan</option>
                                        <option>Surgery</option>
                                        <option>Test</option>
                                    </select>
                                </div>
                                <div class="group-wrap">
                                  <div *ngIf="session.reqItem.category==='Test'"  class="form-group">
                                    <label   for="dos" class="labelss complain">TEST</label>
                                    <input (focus) = "showSuggestions('tests')" autocomplete="off"
                                    [(ngModel)]="session.test.name" (keyup) = searchTest() name="test" class="form-control input first"
                                    placeholder="Alpha-feto protein PB">
                                    <div  *ngIf="matches.length" class="prisOption slideIn">
                                        <ul data-simplebar class="itemsList" >
                                            <li *ngFor="let match of matches">
                                                <p (click)=selectTest(match) class="drugItem">{{match}}<span class="lastdept timetaken "></span>
                                                </p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div *ngIf="session.reqItem.category==='Test'" class="form-group submit-group" >
                                    <label   for="piriod" class="labelss complain">DEPARTMENT</label>
                                    <select [(ngModel)]="session.test.dept"
                                    (focus) = clearMsg()  name='dept'
                                    autocomplete="off" class="form-control input last select">
                                        <option *ngFor="let dept of getLabs()">{{dept.name}}</option>
                                    </select>
                                    <button class="btn btn-outline-primary" type="submit">
                                      <i *ngIf="session.test.name && session.test.dept" title = "Add Request"
                                      (click)="addRequest()"
                                      class="icon ion-ios-plus-empty arrow "> </i>
                                    </button>
                                </div>
                                </div>
                                <div class="group-wrap">
                                  <div *ngIf="session.reqItem.category==='Scan'"  class="form-group ">
                                    <label   for="dos" class="labelss complain">SCAN</label>
                                    <input autocomplete="off" [(ngModel)]="session.scan.name"
                                    (focus) = "showSuggestions('scans')"
                                    (keyup) = searchScans()  name="scan"
                                    class="form-control input first"
                                    placeholder="e.g Chest X-ray">
                                    <div  *ngIf="matches.length" class="prisOption slideIn">
                                        <ul data-simplebar class="itemsList" >
                                            <li *ngFor="let match of matches">
                                                <p (click)=selectScan(match) class="drugItem"
                                                >{{match}}<span class="lastdept timetaken "></span>
                                                </p>
                                            </li>
                                        </ul>
                                    </div>
                                  </div>
                                  <div *ngIf="session.reqItem.category==='Scan'" class="form-group submit-group">
                                      <label   for="piriod" class="labelss complain">DEPARTMENT</label>
                                      <select [(ngModel)]="session.scan.dept" (focus) = clearMsg()  name='dept'
                                      autocomplete="off" class="form-control input last select">
                                          <option *ngFor="let dept of getLabs()">{{dept.name}}</option>
                                      </select>
                                      <button class="btn btn-outline-primary" type="submit">
                                        <i  *ngIf="session.scan.name && session.scan.dept"
                                        title = "Add Request"  (click)="addRequest()"
                                        class="icon ion-ios-plus-empty arrow "> </i>
                                      </button>
                                  </div>
                                  </div>
                                  <div class="group-wrap">
                                    <div *ngIf="session.reqItem.category==='Surgery'"  class="form-group" >
                                      <label   for="surgery" class="labelss complain">SURGERY</label>
                                      <input autocomplete="off"
                                      [(ngModel)]="session.surgery.name"
                                      (focus) = "showSuggestions('surgeries')"
                                      (keyup) = searchSurgeries()  name="surgery"
                                      class="form-control input first " placeholder="e.g Appendectomy">
                                      <div  *ngIf="matches.length"  class="prisOption slideIn">
                                          <ul data-simplebar class="itemsList">
                                              <li *ngFor="let match of matches">
                                                  <p (click)=selectSurgery(match) class="drugItem" >
                                                      {{match}}
                                                      <span class="lastdept timetaken "></span>
                                                  </p>
                                              </li>
                                          </ul>
                                      </div>
                                  </div>
                                  <div *ngIf="session.reqItem.category==='Surgery'" class="form-group submit-group">
                                      <label   for="piriod" class="labelss complain">DEPARTMENT</label>
                                      <select [(ngModel)]="session.surgery.dept" (focus) = clearMsg()
                                          name='dept'  autocomplete="off" class="form-control input last select">
                                          <option *ngFor="let dept of getDepts()">{{dept.name}}</option>
                                      </select>
                                      <button class="btn btn-outline-primary">
                                        <i *ngIf="session.surgery.name && session.surgery.dept"
                                        title = "Add Request" (click)="addRequest()"
                                        class="icon ion-ios-plus-empty arrow "> </i>
                                      </button>
                                  </div>
                                </div>

                                <div *ngIf='session.tests.length||session.scans.length||session.surgeries.length' class="form-group vitals-section setGroup">
                                    <table cellspacing="0" class="data-table drugs-table" style="width:100%;left:0%;" summary="List of all items in store. ">
                                        <thead class='productHead'>
                                            <tr class="patient-th">
                                                <th class="headlbl patient-th items-head">REQUEST</th>
                                                <th class="headlbl patient-th items-head">PRICE</th>
                                                <th class="headlbl patient-th items-head"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="border-bottom: 1px solid #f8f9fa;" *ngFor='let item of session.invoices; let i = index; let odd = odd' class="ro patient-row">
                                                <td style="padding:0px;padding-left:4px;" class="data">
                                                    {{item.name}}
                                                </td>
                                                <td style="padding:0px;text-align: right;padding-left:4px;" class="data">
                                                    {{item.price||'---'}} </td>
                                                <td style='padding:0px; padding-left:3px;text-align: center' class="data">
                                                    <i (click)=removeRequest(i,item) class="icon ion-ios-trash-outline tableicon" title="Discard" style="font-size:15px; cursor: pointer;"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot col-span='4' style='font-size:11px; text-align:right; position:absolute; color:lightgrey; font-weight:bold;padding-right: 15px; border-top: 1px solid whitesmoke;width:100%'>Total:&nbsp;<span style="color: black">{{getRequestTotal()}}</span> </tfoot>
                                    </table>
                                </div>
                            </form>

                            <form *ngIf="count === 2"  style="width:60%;" class="staffsform">
                                <div class="form-group">
                                    <label   for="request" class="labelss">VITAL</label>
                                    <select name="vital" id=select
                                    [(ngModel)] = vital autocomplete="off"
                                    class="form-control input">
                                        <option>Blood Presure</option>
                                        <option>Tempreture</option>
                                        <option>Pulse Rate</option>
                                        <option>Respiratory Rate</option>
                                    </select>
                                </div>

                                <div class="group-wrap">
                                  <div *ngIf="vital==='Blood Presure'"  class="form-group" >
                                    <label   for="dos" class="labelss complain">SYSTOLIC</label>
                                    <input (keyup)="clearVital('Blood Presure')"
                                    [(ngModel)]="session.vitals.bp.systolic"
                                    placeholder="mm Hg"   [min]='1'
                                    type="number" name="systolic"
                                    class="form-control input first ">
                                  </div>
                                  <div *ngIf="vital==='Blood Presure'"
                                      class="form-group submit-group" >
                                      <label   for="piriod" class="labelss complain">DIASTOLIC</label>
                                      <input  (keyup)="clearVital('Blood Presure')"
                                      [(ngModel)]="session.vitals.bp.diastolic"
                                      type="number" [min]='1' name="dystolic"
                                      class="form-control input last" placeholder="mm Hg">
                                      <button class="btn btn-outline-primary">
                                        <i title = "Add Vital" (click)= addVital()
                                        class="icon ion-ios-plus-empty arrow "></i>
                                      </button>
                                  </div>
                                </div>
                                <div *ngIf="vital === 'Tempreture'" class="form-group submit-group">
                                  <label   for="piriod" class="labelss complain">TEMPRETURE</label>
                                  <input
                                      class="form-control input first"
                                      (keyup)="clearVital('Tempreture')"
                                      [(ngModel)]="session.vitals.tempreture.value"
                                      type="number" [min]='1'
                                      name="temp"
                                      placeholder="Degree Fahrenheit">
                                      <button class="btn btn-outline-primary">
                                        <i title = "Add Vital" (click)= addVital()
                                        class="icon ion-ios-plus-empty arrow "></i>
                                      </button>
                                </div>

                                <div *ngIf="vital === 'Pulse Rate'" class="form-group submit-group">
                                      <label   for="piriod" class="labelss complain">PULSE RATE</label>
                                      <input
                                        (keyup)="clearVital('Pulse Rate')"
                                        [(ngModel)]="session.vitals.pulse.value"
                                        type="number" [min]='1' name="pulse"
                                        class="form-control input first" placeholder="bpm">
                                      <button class="btn btn-outline-primary">
                                        <i title = "Add Vital" (click)= addVital()
                                        class="icon ion-ios-plus-empty arrow "></i>
                                      </button>
                                </div>
                                <div *ngIf="vital === 'Respiratory Rate'" class="form-group submit-group">
                                    <label   for="piriod" class="labelss complain">RESPIRATORY RATE</label>
                                    <input  type="number" [min]='1'
                                      (keyup)="clearVital('Respiratory Rate')"
                                      [(ngModel)]="session.vitals.resp.value"
                                      name="resp"
                                      class="form-control input first"
                                      placeholder="bpm">
                                    <button class="btn btn-outline-primary">
                                      <i title = "Add Vital" (click)= addVital()
                                      class="icon ion-ios-plus-empty arrow "></i>
                                    </button>
                                </div>
                                <div *ngIf='vitals.length' class="form-group vitals-section setGroup">
                                      <table cellspacing="0" class="data-table drugs-table" style="width:100%;left:0%;" summary="List of all items in store. ">
                                          <thead class='productHead'>
                                              <tr class="patient-th">
                                                  <th class="headlbl patient-th items-head">VITAL SIGN</th>
                                                  <th class="headlbl patient-th items-head">VALUE</th>
                                                  <th class="headlbl patient-th items-head"></th>
                                              </tr>
                                          </thead>
                                          <tbody>
                                              <tr style="border-bottom: 1px solid #f8f9fa;" *ngFor='let sign of vitals; let i = index; let odd = odd' class="ro patient-row">
                                                  <td style="padding:0px;padding-left:4px;" class="data">
                                                      {{sign.name}}
                                                  </td>
                                                  <td style="padding:0px;text-align: right;padding-left:4px;" class="data">
                                                      {{sign.val}} </td>
                                                  <td style='padding:0px; padding-left:3px;text-align: center' class="data">
                                                      <i (click)=removeVital(i,sign) class="icon ion-ios-trash-outline tableicon" title="Discard" style="font-size:15px; cursor: pointer;"></i>
                                                  </td>
                                              </tr>
                                          </tbody>
                                      </table>
                                  </div>
                            </form>
                            <form *ngIf="count === 4"  style="width:60%;" class="staffsform">
                                <div class="form-group submit-group">
                                    <label   for="request" class="labelss">CONDITION</label>
                                    <input autocomplete="off"
                                    [(ngModel)]="session.condition.condition"
                                    (focus) = "showSuggestions('conditions')"
                                    (keyup) = searchCond() name="test"
                                    class="form-control input first"
                                    placeholder="Diabetes mellitus">
                                    <div  *ngIf="matches.length" class=" prisOption  slideIn">
                                        <ul data-simplebar class="itemsList">
                                            <li *ngFor="let match of matches">
                                                <p (click)=selectCond(match) class="drugItem">{{match}}<span class="lastdept timetaken "></span>
                                                </p>
                                            </li>
                                        </ul>
                                    </div>
                                    <button class="btn btn-outline-primary">
                                      <i *ngIf="session.condition.condition"
                                      (click) = "addCondition()" title="Add condition"
                                      class="icon ion-ios-plus-empty arrow "></i>
                                    </button>
                                </div>
                                <div *ngIf='session.conditions.length' class="form-group vitals-section setGroup">
                                    <table cellspacing="0" class="data-table drugs-table" style="width:100%;left:0%;" summary="List of all items in store. ">
                                        <thead class='productHead'>
                                            <tr class="patient-th">
                                                <th style='padding: 4px;font-size:10px;color: #6c757d;font-weight:bold' class="headlbl patient-th">CONDITION</th>
                                                <th style='padding: 4px;font-size:10px;color: #6c757d;' class="headlbl patient-th"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="border-bottom: 1px solid #f8f9fa;" *ngFor='let cond of session.conditions; let i = index; let odd = odd' class="ro patient-row">
                                                <td style="padding:0px;padding-left:4px;" class="data">
                                                    {{cond.condition}}
                                                </td>
                                                <td style='padding:0px; padding-left:3px;text-align: center' class="data">
                                                    <i (click)=removeCondition(cond.condition,i) class="icon ion-ios-trash-outline tableicon" title="Discard" style="font-size:15px; cursor: pointer;"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </form>
                            <form *ngIf="count===5"  style="width:60%;" class="staffsform">
                                <div class="form-group">
                                    <label   for="drug" class="labelss">PRODUCT</label>
                                    <input  (focus) = "showSuggestions('medications')"
                                    (keyup)= searchMedications()
                                    [(ngModel)]=session.medication.name
                                    placeholder="E.g paracetamol 500mg"
                                     autocomplete="off"
                                     name="drug"
                                     class="form-control input"
                                    />
                                    <div  *ngIf="matches.length" class="prisOption slideIn">
                                        <ul data-simplebar class="itemsList" >
                                            <li *ngFor="let match of matches">
                                                <p (click)=selectMedic(match) class="drugItem">{{match}}<span class="lastdept timetaken "></span>
                                                </p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="group-wrap">
                                  <div class="form-group">
                                    <label   for="dos" class="labelss complain">INTAE</label>
                                    <input [(ngModel)]="session.medication.priscription.intake"
                                     [min]='0.5' type="number" step='0.5' name="dos"
                                     class="form-control input first">
                                  </div>
                                  <div class="form-group" >
                                      <label   for="freq" class="labelss complain">FREQ</label>
                                      <select id=select (focus) = clearMsg()
                                      [(ngModel)]="session.medication.priscription.freq"
                                      class="form-control input mid  " name="freq">
                                          <option>bd</option>
                                          <option>od</option>
                                          <option>qds</option>
                                          <option>tds</option>
                                      </select>
                                  </div>
                                  <div class="form-group submit-group">
                                      <label   for="piriod" class="labelss complain">DAYS</label>
                                      <input  name='days' [(ngModel)]="session.medication.priscription.piriod"
                                      type="number" [min]='1' name="piriod" class="form-control input last">
                                      <button class="btn btn-outline-primary">
                                        <i *ngIf="session.medication.name && session.medication.priscription.intake &&session.medication.priscription.freq && session.medication.priscription.piriod"
                                        title="Add Medication" (click)="addMedication()"
                                        class="icon ion-ios-plus-empty arrow "></i>
                                      </button>
                                  </div>
                                </div>
                                <div *ngIf="session.medications.length" class="form-group vitals-section setGroup">
                                    <table cellspacing="0" class="data-table drugs-table" style="width:100%;left:0%;" summary="List of all items in store. ">
                                        <thead class='productHead'>
                                            <tr class="patient-th">
                                                <th class = "headlbl patient-th items-head">PRODUCT</th>
                                                <th class="headlbl patient-th items-head">DOSAGE</th>
                                                <th class="headlbl patient-th items-head">PRICE</th>
                                                <th class="headlbl patient-th items-head"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="border-bottom: 1px solid #f8f9fa;"  *ngFor="let med of session.medInvoices let i = index; let odd = odd;" class="ro patient-row">
                                                <td style="padding:0px;padding-left:4px;" class="data">{{med.name}}</td>
                                                <td style='padding:0px;' class="data">
                                                    {{getPriscription(med)}}</td>
                                                <td style='padding:0px;text-align:center;padding:0px' class="data" >
                                                    {{med.price||'---'}}
                                                </td>
                                                <td style="text-align:left;padding:0px; padding-left:3px" class="data">
                                                    <i (click)="removePriscription(i)" class="icon ion-ios-trash-outline tableicon" title="Discard" style="font-size:15px; cursor: pointer;"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot col-span='4' style='font-size:11px; text-align:right; position:absolute; color:lightgrey; font-weight:bold;padding-right: 15px; border-top: 1px solid whitesmoke;width:100%'>Total:&nbsp;<span style="color: black">{{getPriceTotal()}}</span> </tfoot>
                                    </table>
                                </div>
                            </form>
                            <form *ngIf="count===6"  style="top: 3%; width:60%;margin:auto;position: relative; border-bottom: 1px solid whitesmoke" class=" ">
                                <div class="form-group vitals-section formGroup newnote">
                                    <textarea [(ngModel)]="session.note.note" id='newnote' style="width:100%; min-height: 150px; font-size: 13px; padding: 5px; border: 0px; " name="note" placeholder="Additional note"></textarea>
                                </div>
                            </form>
                        </div>
                        <div style="left:12%; top:45%;position: absolute;
                        width: 7%;" class="btn-group disposition">
                            <button [disabled]='count === 0' (click) = prev() style="width:32px;height: 32px;border-radius: 50%;left:35%"   class="btn btn-outline-primary  dispo shift-button" >
                                <i  style='position:absolute;right:36%;top:2px; font-size:large; cursor:pointer; display: inline-block;' title="Back" class="icon ion-android-arrow-back ">
                                </i>
                            </button>
                        </div>
                        <div style="left: 76%; top:45%;position: absolute;
                        width: 7%;" class="btn-group disposition">
                            <button [disabled] = 'count === 6' (click) = next()
                            style="width:32px;height: 32px;border-radius: 50%;left:35%"
                            class="btn btn-outline-primary  dispo shift-button" >
                                <i style='position:absolute;right:36%;top:2px; font-size:large; cursor:pointer; display: inline-block;' title="Next" class="icon ion-android-arrow-forward ">
                                </i>
                            </button>
                        </div>
                        <div *ngIf="count === 6" style="left:31%;top:-74px;position:relative;width:53%" class="btn-group disposition">
                            <button [disabled]='isEmptySession()'
                            (click) = updateRecord() style=" width:170px;font-size: 10px; border-radius: 30px; height:27px;left:15%; bottom:10%;" class="btn btn-sm btn-outline-primary mainbtn">
                                <div *ngIf="processing" class='spinner small'></div>
                                <span *ngIf="!processing" >UPDATE RECORD</span>
                            </button>

                        </div>
                        <h6 *ngIf="feedback" class="feedbackMsg">{{feedback}}</h6>
                        <h6 *ngIf="errLine"  style="color: red" class="feedbackMsg">{{errLine}}</h6>
                    </div>
                </div>
            </div>
        </div>
    </div>


<div style="padding-top:0px" class="container history-container">
    <div class="row history-row">
        <div *ngIf='!patient._id' class='issue'>
            <div *ngIf='loading' class="lds-css ng-scope">
            <div style="width:100%;height:100%" class="lds-rolling"><div></div></div></div>
            <div (click) = refresh()  *ngIf='message' title='Refresh' class='refresh'><i class="icon ion-ios-reload "></i></div>
             <h6 *ngIf='message' style='font-size:13px;position:absolute;top:65%; width:100%; color:lightgrey;text-align: center' >{{message}}</h6>
         </div>
        <div *ngIf='patient._id' class="col col-xs-3 col-sm-3 col-md-3 col-lg-3 col-xl-3">
            <div class="card-colums leftcolumn">
                <div class="card card-secondary historycard leftcard">
                    <div class="card-body infobody">
                        <div class="carditem">
                            <div class="timeline detailstimeline"><i class="icon ion-ios-person-outline deticon"></i></div>
                            <h6 class="dept detailshead">PERSONAL INFO</h6>
                            <p class="dept previnfo">Age:&nbsp;<span class="predata">
                              {{patient.info.personal.dob|dob}}</span></p>
                            <p class="dept previnfo">Gender:&nbsp;<span class="predata">
                              {{patient.info.personal.gender||'---'}}</span></p>
                            <p class="dept previnfo">Marital Status:&nbsp;<span class="predata">
                              {{patient.info.personal.mstatus||'---'}}</span></p>
                            <p class="dept previnfo">Occupation:&nbsp;<span class="predata">
                              {{patient.info.personal.occupation||'---'}}</span></p>
                            <p class="dept previnfo">Religion:&nbsp;<span class="predata">
                              {{patient.info.personal.religion||'---'}}</span></p>
                            <p class="dept previnfo">Tribe:&nbsp;<span class="predata">
                              {{patient.info.personal.tribe||'---'}}</span></p>
                            <p *ngIf="patient.record.cards.length" class="dept previnfo">Card Type:&nbsp;<span class="predata">
                              {{patient.record.cards[0].category||'---'}}</span></p>
                            <p *ngIf="patient.record.cards.length" class="dept previnfo">Card No:&nbsp;<span class="predata">
                                {{patient.record.cards[0].pin||'---'}}</span>
                            </p>
                        </div>
                        <div class="carditem">
                            <div class="timeline detailstimeline"><i class="icon ion-ios-location-outline deticon"></i></div>
                            <h6 class="dept detailshead">CONTACT</h6>
                            <p class="dept previnfo">Mobile:&nbsp;<span class="predata">
                              {{patient.info.contact.me.mobile||'---'}}</span></p>
                            <p class="dept previnfo">Email:&nbsp;<span class="predata">
                              {{patient.info.contact.me.email||'---'}}</span></p>
                            <p class="dept previnfo">Address:&nbsp;<span class="predata">
                              {{patient.info.contact.me.address||'---'}}</span></p>
                            <p class="dept previnfo">State:&nbsp;<span class="predata">
                              {{patient.info.contact.me.state||'---'}}</span></p>
                            <p class="dept previnfo">City:&nbsp;<span class="predata">
                              {{patient.info.contact.me.lga||'---'}}</span></p>
                            <p class="dept previnfo">Next of Kin:&nbsp;<span class="predata">
                              {{patient.info.contact.me.kinName||'---'}}</span></p>
                            <p class="dept previnfo">Emergency:&nbsp;<span class="predata">
                              {{patient.info.contact.emergency.mobile||'---'}}</span></p>
                        </div>
                        <div class="carditem">
                            <div class="timeline detailstimeline"><i style="position:absolute; color:lightblue;left:6px" class="icon ion-ios-lightbulb-outline deticon"></i></div>
                            <h6 class="dept detailshead">INSURANCE</h6>
                            <p class="dept previnfo">ID&nbsp;<span class="predata">
                                {{patient.info.insurance.groupNo||'---'}}</span></p>
                            <p class="dept previnfo">Employer:&nbsp;<span class="predata">
                                {{patient.info.insurance.employer||'---'}}</span></p>
                            <p class="dept previnfo">HMO:&nbsp;
                            <span class="predata">{{patient.info.insurance.employer||'---'}}</span></p>
                            <p class="dept previnfo">SSN:&nbsp;<span class="predata">
                                {{patient.info.insurance.ssn||'---'}}</span></p>
                        </div>
                    </div>
                </div>

                <div class="card card-secondary historycard leftcard visits">
                    <div class="card-header grapheader">
                        <h1 class="dept headtitle">VISITS</h1>
                    </div>
                    <div style ="padding-left:17px;" class="card-body rightcardbody">
                        <div  *ngFor="let visit of patient.record.visits; let i = index"  class="carditem priscriptioncontainer order">
                            <div style='left:-7.2%' class="timeline condition drugtimeline">
                                <p class="timelinedate"> {{visit[0]?.visitedOn|date:'dd'}}</p>
                                <p  class="timelinedate month"> {{visit[0]?.visitedOn|date:'MMM'|uppercase}}</p>
                            </div>
                            <div *ngFor ="let vst of visit; let j= index" class="priscription drug">
                                <p class="dept">{{vst.dept}}
                                    <span style="left: 72%;" class="predata notetime">{{vst.visitedOn|date:'hh:mma'|lowercase}}</span>
                                    <!-- <span style="top: 100%;left: 1%;position: absolute;" class="predata">
                                        {{vst.dischargedOn|date:'dd-MM-y hh:mma'|lowercase}}
                                    </span> -->
                                </p>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="card card-secondary historycard leftcard deathinfo">
                    <div class="card-header grapheader">
                        <h1 class="dept headtitle">ALLEGIES</h1>
                    </div>
                    <div class="card-body rightcardbody">
                        <h1 *ngIf='!patient.record.allegies.length' style='color:lightgrey; ' class="dept headtitle record-placeholder">NO RECORD</h1>
                      <h1 *ngIf='!patient.record.allegies.length' style='color:lightgrey; width:100%; text-align:center;top:43%;position:absolute;' class="dept headtitle">NO RECORD</h1>
                        <div class="carditem">
                            <ul class="itemlist">
                                <li *ngFor = 'let a of patient.record.allegies'>
                                    {{a.allegy}}
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div style = 'height:275px' class="card card-secondary historycard leftcard deathinfo">
                    <div class="card-header grapheader">
                        <h1 class="dept headtitle">DEATH INFORMATION</h1>
                    </div>
                    <div class="card-body rightcardbody">
                        <h1 style='color:lightgrey;
                        width:100%;
                        text-align:center;
                        top:43%;
                        position:absolute;'
                        class="dept headtitle">NO RECORD</h1>
                        <div class="carditem"></div>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf='patient._id' class="col col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
            <div class="card-colums">
                <div class="card card-secondary historycard midlecard graphcard">
                    <div style="margin-left: 0px; border:0px" class="card-body notecardbody nopading">
                      <div class="profile-wrap">
                        <div id="pwrap" style="border-radius: 50%;" class="p-wrap">
                            <img style="border-radius: 50%;" [src] = getDp(patient.info.personal.avatar) alt="">
                        </div>
                        <p class="name">{{patient.info.personal.firstName + ' ' + patient.info.personal.lastName}}</p>
                        <div class="vitals-wrap">
                          <div [class.in] = "vit==='in'" [class.out] = "vit==='out'"  class="info vital vitals-vals">
                            <div class="info-lbl">
                                <p *ngIf="patient.record.vitals.bloodGl.length">{{patient.record.vitals.bloodGl[0].value ||'---'}}</p>
                                <p class='lbl'>BLOOD</p>
                            </div>
                            <div class="info-lbl">
                                <p *ngIf=patient.record.vitals.height.length>{{patient.record.vitals.height[0].value ||'---'}}
                                  <span *ngIf="patient.record.vitals.height.length" style="font-size: 10px;" class="units">ft</span></p>
                                <p class='lbl'>HEIGHT</p>
                            </div>
                            <div class="info-lbl">
                                <p *ngIf="patient.record.vitals.weight.length">{{patient.record.vitals.weight[0].value||'---'}}
                                  <span *ngIf="patient.record.vitals.weight.length" style="font-size: 10px;" class="units">kg</span></p>
                                <p class='lbl'>WEIGHT</p>
                            </div>
                        </div>
                        <div [class.in] = "vit==='in'" [class.out] = "vit==='out'" class="info vital vitals-form">
                          <form>
                            <div style="margin-bottom: 2px;" class="form-group">
                              <label for=blood-group >B.GROUP</label>
                              <select [(ngModel)]="session.vitals.bloodGl.value"
                              name = blood-group autocomplete="off"
                              class='form-control input first select'>
                                  <option>A+</option>
                                  <option>A-</option>
                                  <option>AB+</option>
                                  <option>AB-</option>
                                  <option>O+</option>
                                  <option>O-</option>
                              </select>
                            </div>
                            <div style="margin-bottom: 2px;"  class="form-group">
                              <label for=height>HEIGHT</label>
                              <input [(ngModel)]="session.vitals.height.value" type=number name = height autocomplete="off" class='form-control input mid'>
                            </div>
                            <div style="margin-bottom: 2px;"  class="form-group submit-group">
                              <label for=weight >WEIGHT</label>
                              <input [(ngModel)]="session.vitals.weight.value"
                              type=number autocomplete="off" name = weight
                              class='form-control input last'>
                              <button class="btn btn-outline-primary" type="submit">
                                <div *ngIf="editing ==='editing'" class='spinner small'></div>
                                <i *ngIf="editing==='edited'" style="left: 58px" class="icon ion-ios-checkmark-empty paid-icon"></i>
                                <i *ngIf=!editing  title="Update" (click)="addProfiles()" class="icon ion-ios-plus-empty arrow "> </i>
                              </button>
                            </div>
                          </form>
                          </div>
                        </div>
                        <div class="switches">
                          <i  *ngIf="edit" (click) = hideEdidt() title="close" class="icon ion-ios-close-empty"></i>
                          <i  style="font-size: 12px;" *ngIf=!edit (click)= showEdit() title="Edit" class="material-icons ">edit</i>
                        </div>
                        <div style="width:150px;margin:auto;top:75%;left: 33%;position: absolute;">
                          <button *ngIf="isConsult() && (patient.record.visits[0][0].status !=='out') " data-toggle="modal" data-target="#consModal"   style=" width:150px;top:8px;margin:auto;font-size:10px; height:27px;position:relative;left: 4px;" class="btn btn-sm btn-outline-primary  mainbtn">
                              RECORD
                          </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div style="margin-bottom: 3px" class="card card-secondary historycard midlecard graphcard">
                    <div style='border-top-right-radius:12px;border-top-left-radius:12px;' class="card-header grapheader">
                        <h1 class="dept headtitle">NOTES</h1>
                    </div>
                    <div class="card-body notecardbody">
                        <h1 *ngIf='!patient.record.notes.length' style='color:lightgrey; ' class="dept headtitle record-placeholder">NO NOTES</h1>
                        <div *ngFor = "let note of patient.record.notes;let i=index" class="carditem noteitem writeup">
                          <div style="position:absolute;left:-3%;" class="timeline lastdoc priscriber headerdp small-dp">
                            <img [src] = getDp(note.meta.addedBy.info.personal.avatar)/>
                          </div>
                            <h1 class="dept previnfo noterinfo">
                                {{note.meta.addedBy.info.personal.firstName+' '+note.meta.addedBy.info.personal.lastName}}
                              <span style='color: lightgray;font-weight: normal' >
                                {{'|'+' '+ note.meta.addedBy.info.official.department}}</span>
                              <span class="predata notetime">
                                {{note.meta.dateAdded|date:'dd/MM/y hh:mma'|lowercase}}</span>
                            </h1>
                            <p class="note-item">{{note.note}}<br>
                              <!-- <span *ngIf= "!compareNotes(i, note)" (click) = "readMore($event,i)" class="read-more"><a href="#">Read more</a></span> -->
                          </p>
                        </div>
                    </div>
                    <p class="card-link view-more">Show more<span><i class="icon ion-android-more-vertical thread-icon"></i></span>
                    </p>
                </div>
                <div class="card-group">
                    <div style='border-radius:12px;margin-bottom: 4px;' class="card card-secondary maincard halfcard">
                        <div style='border-top-right-radius:12px;border-top-left-radius:12px'  class="card-header grapheader">
                            <h1 class="dept headtitle">TESTS</h1>
                        </div>
                        <div style='height:100%;padding-left: 17px;' class="card-body midcardbody">
                            <h1 *ngIf="!patient.record.tests" style='color:lightgrey; ' class="dept headtitle record-placeholder">NO RECORD</h1>
                            <div  *ngFor="let tetst of patient.record.tests; let i = index"  class="carditem priscriptioncontainer order">
                                <div style='left:-7.2%' class="timeline condition drugtimeline">
                                    <p class="timelinedate"> {{tetst[0]?.meta.dateAdded|date:'dd'}}</p>
                                    <p  class="timelinedate month"> {{tetst[0]?.meta.dateAdded|date:'MMM'|uppercase}}</p>
                                </div>
                                <div *ngFor ="let t of tetst; let j = index" class="priscription drug">
                                    <p class="dept">{{t.name}}</p>
                                    <h6 *ngIf="t.report.attachments.length" class="dept previnfo" style="color:lightgrey">
                                    <span><i (click) = "pullImages(i,j, 'test')"data-toggle="modal" data-target="#slideShow" title="View attachment"  style='font-size: 15px; cursor: pointer;' class="icon ion-android-attach"></i></span>&nbsp;{{t.report.attachments.length + ' '+'attachment'+getLength(t.report.attachments.length)}}
                                    <span style="text-align:right;left:70%;display: inline-block;width:50px"  class="predata priceval">
                                        <i title="Download" style='font-size: 20px;position:absolute;bottom:-17px;left: 75%;cursor: pointer;' class="icon ion-ios-download-outline paid-icon"></i>
                                    </span>
                                    </h6>
                                    <h6 *ngIf="t.report.comment" class="dept previnfo" style="color:lightgrey">
                                    <span><i (click)="toggleComment(i,j,'open') "title="View Comment" style='font-size: 17px;cursor:pointer' class="icon ion-ios-chatbubble-outline"></i></span>
                                    &nbsp;Comment
                                    </h6>
                                    <div *ngIf="t.report.meta.selected"  class="comment">
                                        <div (click) = "toggleComment(i,j,'close')" class="close-comment">
                                            <i title="close" class="icon ion-ios-close-empty"></i>
                                        </div>
                                        <div style="width: 100%; position: relative;height: 80%;" class="comment-note">
                                            <p style="font-size: .75rem;color:gray;padding:0 10px">
                                               {{t.report.comment}}
                                            </p>
                                        </div>
                                        <div class="commentator">
                                            <div class="commentator-media">
                                                <div class=" timeline lastdoc priscriber headerdp small-dp commentor-dp">
                                                     <img style='height:100%; width:100%; object-fit:cover; border-radius:50%;' [src] = getDp(patient.info.personal.avatar)/>
                                                </div>
                                                <p style="font-size: 11px;position: relative;display: inline-block;left:18px;width: 87%;" class="commentator-name">
                                                    Mohammed Abdullahi
                                                        <span style="color:lightgrey;float: right;">
                                                        {{t.report.meta.dateAdded|date:'dd/MM/y hh:mma'|lowercase}}
                                                    </span>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style='border-radius:12px;margin-bottom: 4px;' class="card card-secondary maincard halfcard halfcard-right">
                        <div style='border-top-right-radius:12px;border-top-left-radius:12px' class="card-header grapheader">
                            <h1 class="dept headtitle">SCANS</h1>
                        </div>
                        <div style='height:100%;padding-left: 17px;' class="card-body midcardbody">
                            <h1 *ngIf="!patient.record.scans.length" style='color:lightgrey; ' class="dept headtitle record-placeholder">NO RECORD</h1>
                            <div  *ngFor="let scans of patient.record.scans; let i = index"  class="carditem priscriptioncontainer order">
                                <div style='left:-7.2%' class="timeline condition drugtimeline">
                                    <p class="timelinedate"> {{scans[0]?.meta.dateAdded|date:'dd'}}</p>
                                    <p  class="timelinedate month">{{scans[0]?.meta.dateAdded|date:'MMM'|uppercase}}</p>
                                </div>
                                <div *ngFor ="let s of scans; let j= index" class="priscription drug">
                                    <p class="dept">{{s.name}} </p>
                                    <h6 *ngIf="s.report.attachments.length" class="dept previnfo" style="color:lightgrey">
                                    <span><i (click) = "pullImages(i,j, 'scan')" data-toggle="modal" data-target="#scanFiles" title="View attachment"  style='font-size: 15px; cursor: pointer;' class="icon ion-android-attach"></i></span>&nbsp;
                                    {{s.report.attachments.length + ' '+' attachment'+getLength(s.report.attachments.length)}}
                                    <span style="text-align:right;left:70%;display: inline-block;width:50px"  class="predata priceval">
                                        <i title="Download" style='font-size: 20px;position:absolute;bottom:-17px;left: 75%;cursor: pointer;' class="icon ion-ios-download-outline paid-icon"></i>
                                    </span>
                                    </h6>
                                    <h6 *ngIf="s.report.comment" class="dept previnfo" style="color:lightgrey">
                                    <span><i (click)="toggleScanComment(i,j,'open') "title="View Comment" style='font-size: 17px;cursor:pointer' class="icon ion-ios-chatbubble-outline"></i></span>
                                    &nbsp;Comment
                                    </h6>
                                    <div *ngIf="s.report.meta.selected"   style="left:-46px;"  class="comment">
                                        <div (click) = "toggleScanComment(i,j,'close')" class="close-comment">
                                            <i title="close" class="icon ion-ios-close-empty"></i>
                                        </div>
                                        <div style="width: 100%; position: relative;height: 80%;" class="comment-note">
                                            <p style="font-size: .75rem;color:gray;padding:0 10px;z-index: 100;">
                                               {{s.report.comment}}
                                            </p>
                                        </div>
                                        <div class="commentator">
                                            <div class="commentator-media">
                                                <div class=" timeline lastdoc priscriber headerdp small-dp commentor-dp">
                                                        <img style='height:100%; width:100%; object-fit:cover; border-radius:50%;' [src] = getDp(patient.info.personal.avatar)/>
                                                </div>
                                                <p style="font-size: 11px;position: relative;display: inline-block;left:18px;width: 87%;" class="commentator-name">
                                                    Mohammed Abdullahi <span style="color:lightgrey;float: right;">
                                                        {{s.report.meta.dateAdded|date:'dd/MM/y hh:mma'|lowercase}}
                                                    </span>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card card-secondary historycard midlecard topcard graphcard">
                    <div class="card-header grapheader">
                        <h1 class="dept headtitle">VITALS</h1>
                        <h1 style="position: absolute;
                        left: 88%;
                    top: 6px;" class="dept headtitle">{{showing}}<span>
                          <i style="top: -3px;  position: absolute;  color: lightgrey;
                          margin-left: 5px;" (click) ='toggleSortMenu()' class="icon ion-ios-arrow-down shevron"></i>
                        </span></h1>
                    </div>
                  <p class="unit-label">{{unit}}</p>
                    <div *ngIf=sortMenu
                    style='position: absolute; width: 100px;top: -1px;height: auto;left: 368px;' class="menu">
                      <ul (mouseleave)='toggleSortMenu()'  class="actions primary">
                          <li (click) = "switchVitals('BP','mmHg')" class="action">BP</li>
                          <li (click) = "switchVitals('P', 'bpm')" class="action">P</li>
                          <li (click) = "switchVitals('R', 'bpm')" class="action">R</li>
                          <li (click) = "switchVitals('T','Celcius')" class="action">T</li>
                          <li (click) = "switchVitals('W','Kilograms')" class="action">W</li>
                          <li (click) = "switchVitals('H','Meters')" class="action">H</li>
                      </ul>
                  </div>
                    <div *ngIf = 'showTimeLine()' class="line"></div>
                    <h1 *ngIf="!showTimeLine()" style='color:lightgrey; ' class="dept headtitle record-placeholder">NO RECORD</h1>
                    <div  data-simplebar class="card-body topcardbody nopadding"
                    style="height: 100%;  width: 470px; white-space: nowrap;" >
                    <ul class="ranges">
                      <li class="abnormal"><h6 class="label"><span class ='indicators'></span>ABNORMAL RANGE</h6></li>
                    </ul>
                    <div *ngIf="showing ==='BP'"  class="v-container bp">
                      <div *ngFor="let bp of patient.record.vitals.bp" class="item bp">
                        <p [ngStyle]="getFlags(bp,'bp')" class="itmval bp">{{bp.systolic+'/'+bp.diastolic}}
                        <span style="top: -83%;right: 17px" class="date">{{bp.meta.dateAdded|date:'dd'}}</span>
                        <span style="top: -83%;right: 0px" class="date">{{bp.meta.dateAdded|date:'MMM'|uppercase}}</span>
                        <span  style="right: 13%; top:102%" class="time">{{bp.meta.dateAdded|date:'hh:mma'|lowercase}}</span></p>
                      </div>
                    </div>
                    <div *ngIf="showing ==='T'" class="v-container">
                      <div *ngFor="let t of patient.record.vitals.tempreture" class="item"><p [ngStyle]="getFlags(t,'temp')" class="itmval">{{t.value}}
                        <span style="right: -3px" class="date">{{t.meta.dateAdded|date:'dd'}}</span>
                        <span style="right: -20px" class="date">{{t.meta.dateAdded|date:'MMM'|uppercase}}</span>
                        <span class="time">{{t.meta.dateAdded|date:'hh:mma'|lowercase}}</span></p>
                      </div>
                    </div>
                    <div *ngIf="showing ==='W'" class="v-container">
                      <div *ngFor="let w of patient.record.vitals.weight" class="item"><p [ngStyle]="getFlags(w,'w')" class="itmval">{{w.value}}
                        <span style="right: -3px" class="date">{{w.meta.dateAdded|date:'dd'}}</span>
                        <span style="right: -20px" class="date">{{w.meta.dateAdded|date:'MMM'|uppercase}}</span>
                        <span class="time">{{w.meta.dateAdded|date:'hh:mma'|lowercase}}</span></p>
                      </div>
                    </div>
                    <div *ngIf="showing ==='H'" class="v-container">
                      <div *ngFor="let h of patient.record.vitals.height" class="item"><p [ngStyle]="getFlags(h,'h')" class="itmval">{{h.value}}
                        <span style="right: -3px" class="date">{{h.meta.dateAdded|date:'dd'}}</span>
                        <span style="right: -20px" class="date">{{h.meta.dateAdded|date:'MMM'|uppercase}}</span>
                        <span class="time">{{h.meta.dateAdded|date:'hh:mma'|lowercase}}</span></p>
                      </div>
                    </div>
                    <div *ngIf="showing ==='P'" class="v-container">
                      <div *ngFor="let p of patient.record.vitals.pulse" class="item"><p [ngStyle]="getFlags(p,'p')"  class="itmval">{{p.value}}
                        <span style="right: -3px" class="date">{{p.meta.dateAdded|date:'dd'}}</span>
                        <span style="right: -20px" class="date">{{p.meta.dateAdded|date:'MMM'|uppercase}}</span>
                        <span  class="time">{{p.meta.dateAdded|date:'hh:mma'|lowercase}}</span></p>
                      </div>
                    </div>
                    <div *ngIf="showing ==='R'" class="v-container">
                      <div *ngFor="let r of patient.record.vitals.resp" class="item"><p [ngStyle]="getFlags(r,'r')"  class="itmval">{{r.value}}
                        <span style="right: -3px" class="date">{{r.meta.dateAdded|date:'dd'}}</span>
                        <span style="right: -20px" class="date">{{r.meta.dateAdded|date:'MMM'|uppercase}}</span>
                        <span  class="time">{{r.meta.dateAdded|date:'hh:mma'|lowercase}}</span></p>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-group">
                        <div style='border-radius:12px;margin-bottom: 4px;' class="card card-secondary maincard halfcard">
                            <div style='border-top-right-radius:12px;border-top-left-radius:12px'  class="card-header grapheader">
                                <h1 class="dept headtitle">PROCEDURES</h1>
                            </div>
                            <div style='height:100%;padding-left: 17px;' class="card-body midcardbody">
                                <h1 *ngIf="!patient.record.surgeries.length" style='color:lightgrey; ' class="dept headtitle record-placeholder">NO RECORD</h1>
                                <div  *ngFor="let surgeries of patient.record.surgeries; let i = index"  class="carditem priscriptioncontainer order">
                                    <div style='left:-7.2%' class="timeline condition drugtimeline">
                                        <p class="timelinedate"> {{surgeries[0]?.meta.dateAdded|date:'dd'}}</p>
                                        <p  class="timelinedate month">{{surgeries[0]?.meta.dateAdded|date:'MMM'|uppercase}}</p>
                                    </div>
                                    <div *ngFor ="let s of surgeries; let j= index" class="priscription drug">
                                        <p class="dept">{{s.name}} </p>
                                        <h6 *ngIf="s.report.attachments.length" class="dept previnfo" style="color:lightgrey">
                                            <span><i (click) = "pullImages(i,j, 'scan')" data-toggle="modal" data-target="#scanFiles" title="View attachment"  style='font-size: 15px; cursor: pointer;' class="icon ion-android-attach"></i></span>&nbsp;
                                            {{s.report.attachments.length + ' '+' attachment'+getLength(s.report.attachments.length)}}
                                            <span style="text-align:right;left:70%;display: inline-block;width:50px"  class="predata priceval">
                                                <i title="Download" style='font-size: 20px;position:absolute;bottom:-17px;left: 75%;cursor: pointer;' class="icon ion-ios-download-outline paid-icon"></i>
                                            </span>
                                        </h6>
                                        <h6 *ngIf="s.report.comment" class="dept previnfo" style="color:lightgrey">
                                            <span><i (click)="toggleScanComment(i,j,'open') "title="View Comment" style='font-size: 17px;cursor:pointer' class="icon ion-ios-chatbubble-outline"></i></span>
                                        &nbsp;Comment
                                        </h6>
                                        <div *ngIf="s.report.meta.selected"   style="left:-46px;"  class="comment">
                                            <div (click) = "toggleScanComment(i,j,'close')" class="close-comment">
                                                <i title="close" class="icon ion-ios-close-empty"></i>
                                            </div>
                                            <div style="width: 100%; position: relative;height: 80%;" class="comment-note">
                                                <p style="font-size: .75rem;color:gray;padding:0 10px;z-index: 100;">
                                                   {{s.report.comment}}
                                                </p>
                                            </div>
                                            <div class="commentator">
                                                <div class="commentator-media">
                                                    <div class=" timeline lastdoc priscriber headerdp small-dp commentor-dp">
                                                            <img style='height:100%; width:100%; object-fit:cover; border-radius:50%;' [src] = getDp(patient.info.personal.avatar)/>
                                                    </div>
                                                    <p style="font-size: 11px;position: relative;display: inline-block;left:18px;width: 87%;" class="commentator-name">
                                                        Mohammed Abdullahi <span style="color:lightgrey;float: right;">
                                                            {{s.report.meta.dateAdded|date:'dd/MM/y hh:mma'|lowercase}}
                                                        </span>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style='border-radius:12px;margin-bottom: 4px;  overflow:hidden' class="card card-secondary maincard halfcard halfcard-right">
                            <div style='border-top-right-radius:12px;border-top-left-radius:12px' class="card-header grapheader">
                                <h1 style="padding-left: 15px;" class="dept headtitle">
                                    <span *ngIf="clientMode ==='edit'"><i  (click)="switchClient('view')" style='position:absolute;right:97%;top:-3px; font-size:large;  cursor:pointer; display: inline-block;color:#1da1f2;' title="Back" class="icon ion-android-arrow-back "> </i>
                                    </span> IMMUNIZATIONS <span *ngIf="clientMode !=='edit'" (click)="switchClient('edit')" style='position:absolute;left:93%;top:-2px; cursor:pointer;'>
                                        <i class="material-icons">short_text</i>
                                    </span>
                                </h1>
                            </div>
                            <div [class.back]='clientMode==="edit"' [class.front]='clientMode==="view"' style='height:100%;padding-left: 17px;position:absolute;width:100%;' class="card-body midcardbody">
                                <h1 *ngIf="!patient.record.immunization.vaccins.length" style='color:lightgrey; ' class="dept headtitle record-placeholder">NO RECORD</h1>
                                <div  *ngFor="let vaccins of patient.record.immunization.vaccins; let i = index"  class="carditem priscriptioncontainer order">
                                    <div style='left:-7.2%' class="timeline condition drugtimeline">
                                        <p class="timelinedate"> {{vaccins[0]?.meta.dateAdded|date:'dd'}}</p>
                                        <p  class="timelinedate month"> {{vaccins[0]?.meta.dateAdded|date:'MMM'|uppercase}}</p>
                                    </div>
                                    <div *ngFor ="let v of vaccins; let j = index" class="priscription drug">
                                        <p class="dept">{{v.name}}</p>
                                    </div>
                                </div>
                            </div>
                            <div [class.in]='clientMode==="edit"' [class.out]='clientMode==="view"'  style='height:100%; padding-left: 7px; padding-right: 7px;padding-top: 4%;position:absolute;' class="card-body standby midcardbody">
                                <div *ngFor="let items of vaccins; let i = index" style="border-left: none; border-bottom: 1px solid whitesmoke;"   class="carditem priscriptioncontainer order">
                                    <div *ngFor="let item of items; let j = index" class="priscription drug">
                                        <p class="dept">{{item.name}}
                                            <span  class="predata priceval">
                                                <i (click)= "selectVaccin(i, j, 'uncheck')" *ngIf="item.selected" style='color:lightgrey; top:-19px'  class="icon ion-ios-checkmark-empty paid-icon" title="Deselect ">
                                                </i>
                                                <div (click)= "selectVaccin(i, j, 'check')" *ngIf="!item.selected" class="mycheckbox" ></div>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                                <button (click) = 'addImmunizations()' style="width: 105px;font-size: 10px; height:25px;left:28%; bottom:13%;" class="btn btn-sm btn-outline-primary mainbtn">
                                    UPDATE
                                    <span *ngIf="processing" style="position: absolute; bottom: -7%;left: 4%;">
                                        <i class="fa fa-circle-o-notch fa-spin fa-10x slow-spin "
                                        style="position:absolute;bottom:5px;left:5px;font-size:17px;color: #1da1f2;"> </i>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
        <div *ngIf='patient._id' class="col col-xs-3 col-sm-3 col-md-3 col-lg-3 col-xl-3">
            <div class="card-colums rightcolumn">

                <div style='height:370px'  class="card card-secondary historycard rightcard allegies">
                    <div class="card-header grapheader">
                        <h1 class="dept headtitle">HISTORY</h1>
                    </div>
                    <div style ="padding-left:17px;" class="card-body rightcardbody">
                        <h1 *ngIf='!patient.record.histories.length'
                        style='color:lightgrey; width:100%; text-align:center;top:43%;position:absolute;'
                        class="dept headtitle">NO RECORD</h1>
                        <div  *ngFor="let hist of patient.record.histories; let i = index"  class="carditem priscriptioncontainer order">
                          <div style='left:-7.2%' class="timeline condition drugtimeline">
                              <p class="timelinedate"> {{hist[0]?.meta.dateAdded|date:'dd'}}</p>
                              <p  class="timelinedate month"> {{hist[0]?.meta.dateAdded|date:'MMM'|uppercase}}</p>
                          </div>
                          <div *ngFor ="let h of hist; let j= index" class="priscription drug">
                              <p class="dept">{{h.condition}}<span class="predata"></span>
                                  <span style='
                                  color:lightgrey;
                                  font-size:smaller;
                                  left:102px;width:27%;
                                  position:absolute;text-align:right;'>{{h.duration}}d</span>
                              </p>
                              <h6 class="dept previnfo" style="color:lightgrey">{{h.bearer}}</h6>
                           </div>
                        </div>
                      </div>
                </div>
                <div class="card card-secondary historycard rightcard medication">
                        <div class="card-header grapheader">
                            <h1 class="dept headtitle">COMPLAINS</h1>
                        </div>
                        <div style ="padding-left:17px;" class="card-body rightcardbody">
                          <div  *ngFor="let comp of patient.record.complains; let i = index"  class="carditem priscriptioncontainer order">
                            <div style='left:-7.2%' class="timeline condition drugtimeline">
                                <p class="timelinedate"> {{comp[0]?.meta.dateAdded|date:'dd'}}</p>
                                <p  class="timelinedate month"> {{comp[0]?.meta.dateAdded|date:'MMM'|uppercase}}</p>
                            </div>
                            <div *ngFor ="let c of comp; let j= index" class="priscription drug">
                                <p class="dept">{{c.complain}}<span class="predata"></span>
                                    <span style='color:lightgrey;font-size:smaller;left:102px;width:27%;position:absolute;text-align:right;'>{{c.duration}}d</span>
                                </p>
                             </div>
                          </div>
                        </div>
                    </div>
                    <div style='height:182px;max-height:182px;min-height:182px' class="card card-secondary historycard rightcard medication">
                            <div class="card-header grapheader">
                                <h1 class="dept headtitle">CONDITIONS</h1>
                            </div>
                            <div style ="padding-left:17px;" class="card-body rightcardbody">
                                    <h1 *ngIf='!patient.record.conditions.length'
                                    style='color:lightgrey; width:100%; text-align:center;top:43%;position:absolute;'
                                    class="dept headtitle">NO RECORD</h1>
                              <div  *ngFor="let cond of patient.record.conditions; let i = index"  class="carditem priscriptioncontainer order">
                                <div style='left:-7.2%' class="timeline condition drugtimeline">
                                    <p class="timelinedate"> {{cond[0]?.meta.dateAdded|date:'dd'}}</p>
                                    <p  class="timelinedate month">
                                        {{cond[0]?.meta.dateAdded|date:'MMM'|uppercase}}
                                    </p>
                                </div>
                                <div *ngFor ="let con of cond; let j= index" class="priscription drug">
                                    <p class="dept">{{con.condition}}<span class="predata"></span>
                                        <!-- <span style='color:lightgrey;font-size:smaller;left:105px;width:27%;position:absolute;text-align:right;'>{{medic[0].meta.dateAdded|date:'hh:mma'|lowercase}}</span> -->
                                    </p>
                                 </div>
                              </div>
                        </div>
                     </div>
                     <div class="card card-secondary historycard rightcard medication">
                        <div class="card-header grapheader">
                            <h1 class="dept headtitle">MEDICATIONS</h1>
                        </div>
                        <div style ="padding-left:17px;" class="card-body rightcardbody">
                            <h1 *ngIf='!patient.record.medications.length' style='color:lightgrey; ' class="dept headtitle record-placeholder">NO RECORD</h1>
                        <div *ngFor="let medic of patient.record.medications; let i = index"  class="carditem priscriptioncontainer order">
                            <div style='left:-7.2%' class="timeline condition drugtimeline">
                                <p class="timelinedate">{{medic[0]?.meta.dateAdded|date:'dd'}}</p>
                                <p  class="timelinedate month"> {{medic[0]?.meta.dateAdded|date:'MMM'|uppercase}}</p>
                            </div>
                            <div *ngFor ="let m of medic; let j= index" class="priscription drug">
                                <p class="dept">{{m.name}}<span class="predata"></span>
                                    <span style='
                                        color:lightgrey;
                                        font-size:10px;
                                        left:110px;width:27%;
                                        position:absolute;
                                        text-align:right;'>
                                        {{m.meta.dateAdded|date:'hh:mma'|lowercase}}
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
