<div *ngIf="patients.length"  class="modal fade" role="dialog" tabindex="-1" id="medicModal" style="border-radius:32px;max-width:841px;margin: auto;padding-top: 35px">
    <div style="max-width: 730px;border-radius:32px;" class="modal-dialog" role="document">
        <div class="modal-content" style="width:100%; height:400px;border-radius:32px;padding-left:0px;padding-right: 0px;">
            <div class="modal-body" style="border-radius:32px;padding: 0px;">
                <div class="card card-secondary historycard midlecard profilecard" style="margin:auto;min-height:400px;border-radius:32px;width:100%;position: absolute">
                    <div  data-dismiss="modal" style="height: 25px; width:25px; top:3%; cursor: pointer;  color: white(248, 248, 248); background:rgba(193, 193, 224, 0.2)" class="close-comment">
                        <i  title="close" class="icon ion-ios-close-empty"></i>
                    </div>
                    <div style='padding-left: 30px;border-top-right-radius:32px;border-top-left-radius:32px;border-bottom: 0px;height:40px;margin-bottom: 15px;' class="card-header profileheader small-header">
                        <div style="left:23px;top:13px" class="timeline lastdoc priscriber headerdp small-dp">
                            <img [src]=getDp(patients[curIndex].info.personal.avatar)/>
                        </div>
                        <p style="top:5px"  href="#" class="patien-name small-name">
                        {{patients[curIndex]?.info.personal.firstName + ' ' + patients[curIndex].info.personal.lastName}}<span class="small-headericon"></span>
                        </p>
                        <!-- <h6 style='font-size:11px; font-weight:bold; position:absolute;color:dodgerblue;top:5%;left:70%' class="patien-name small-name">MEDICATIONS</h6> -->
                    </div>

                    <div class="btn-group disposition group-nav">
                        <button (click) = 'nextPage(0)' [class.active] = "pageCount === 0"  class="btn btn-outline-primary  dispo active nav-btn" >Medications</button>
                        <button (click) = 'nextPage(1)'  [class.active] = "pageCount === 1"   class="btn btn-outline-primary dispo nav-btn">Vitals</button>
                        <button (click) = 'nextPage(2)' [class.active] = "pageCount === 2"   class="btn btn-outline-primary  dispo nav-btn">Bills</button>
                    </div>
                    <div *ngIf = 'cardView.orders && pageCount === 0' class="card-body orderbody" style=" width:55%; margin:auto; ">
                        <div style="border-left:2px solid #1da1f2;height:290px; width:100%;">
                            <div style='border:none' *ngFor="let medic of patient.record.medications; let i = index" class="carditem priscriptioncontainer order">
                                <div style='left:-3%' class="timeline condition drugtimeline">
                                    <p class="timelinedate">{{medic[0]?.meta.dateAdded|date:'dd'}}</p>
                                    <p class="timelinedate month"> {{medic[0]?.meta.dateAdded|date:'MMM'|uppercase}}</p>
                                </div>
                                <div *ngFor="let m of medic; let j = index" class="priscription drug">
                                    <h6 [ngStyle]=getStyle(m) class="dept">{{m.name}}&nbsp;<span class="predata"></span>
                                        <span  class="predata priceval">
                                        <i (click)="selectMedication(i,j)" style=' color:lightgrey;'  *ngIf="m.meta.selected" class="icon ion-ios-checkmark-empty paid-icon" title="Deselect "></i>
                                        <div  class="mycheckbox" *ngIf="(!m.meta.selected && !m.paused) "  (click)="selectMedication(i,j)" >
                                        </div>
                                        <div  style='border-color:rgb(216, 216, 216)' *ngIf ="m.paused" class="mycheckbox"></div>
                                        </span>
                                    </h6>
                                    <h6 class="dept previnfo">Dosage&nbsp;
                                        <span class="predata">
                                            {{m.priscription.intake+'-'+m.priscription.freq+'-'+m.priscription.piriod}}
                                        </span>
                                    </h6>
                                    <h6 class="dept previnfo">
                                        <span class="predata">{{m.meta.dateAdded | date:'hh:mma'|lowercase}}</span>
                                        <span *ngIf="m.lastTaken" style="color:lightgrey;font-size:10px;left:77%;text-align:right;position: absolute;width: 82px" class="predata">{{m.lastTaken | date:'dd MMM hh:mma'|uppercase}}</span>
                                        <span *ngIf="!m.lastTaken"  style="color:lightgrey;font-size:10px;left:74.5%;text-align:right;position: absolute;width: 82px" class="predata">---</span>
                                    </h6>
                               </div>
                                <!-- <label class='totalLbl' *ngIf='somePaid(i)'>{{getTransTotal(medic)}} </label> -->
                            </div>
                        </div>
                    </div>
                    <div *ngIf='cardView.editing && pageCount === 0' class="card-body orderbody" style="width:55%;margin:auto;">
                            <form style="top:15%;" class=" staffsform">
                                <div style="top:1px; margin-bottom:25px; min-height: 80px;max-height: 120;" class="form-group vitals-section setGroup">
                                    <table *ngIf="selections.length" cellspacing="0" class="data-table drugs-table" style="width:100%;left:0%;">
                                        <thead class='productHead'>
                                            <tr style="padding-left: 4px" class="staff-th">
                                                <th style="padding:3px 8px;font-weight: bold;color:#1da1f2;" class="headlbl staff-th">MEDICATION</th>
                                                <th style='text-align:right;padding:3px 8px;font-weight: bold;color:#1da1f2;' class="headlbl staff-th">DOSAGE</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let m of selections; let i = index; let odd = odd;" style="border-bottom:2px solid white;" [class.even]=odd class="ro staff-row">
                                                <td style="padding:2px 4px; " class="data"> {{m.name}}</td>
                                                <td style='font-size:11px;text-align:right;padding:2px 6px;' class="data">
                                                {{m.priscription.intake+'-'+m.priscription.freq+'-'+m.priscription.piriod}}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <button (click) = updateTimeTaken() style=" width: 170px;font-size: 10px; height:27px;left:28%; bottom:24%;" class="btn btn-sm btn-outline-primary mainbtn">ADMINISTERED
                                    <span style="position: absolute; bottom: -7%;left: 80%;">
                                    <i *ngIf="processing" class="fa fa-circle-o-notch fa-spin fa-10x slow-spin " style="position:absolute;bottom:5px;left:5px;font-size:19px;color: #1da1f2;"> </i>
                                    </span>
                                </button>
                            </form>
                        </div>
                        <div *ngIf = 'pageCount === 1' class="card-body orderbody" style="width:100%;">
                            <form style="top:25%;" class=" staffsform">
                                    <div class="form-group ">
                                        <label style='font-size:8px;left: 25px;top:-15%;' for="title" class="labelss complain">SELECT VITALS
                                        </label>
                                        <select name="vital" [(ngModel)] = vital autocomplete="off" class=" patientdata status inputs dataInfo " name="bedno">
                                            <option>Blood Presure</option>
                                            <option>Tempreture</option>
                                            <option>Pulse Rate</option>
                                            <option>Respiratory Rate</option>
                                        </select>
                                      </div>
                                      <div class="group-wrap">
                                        <div *ngIf="vital==='Blood Presure'"  class="form-group" >
                                          <label style="font-size:8px" for="dos" class="labelss complain">SYSTOLIC</label>
                                          <input (keyup)="clearVital('Blood Presure')"
                                          [(ngModel)]="session.vitals.bp.systolic"
                                          placeholder="mm Hg"   [min]='1'
                                          type="number" name="systolic"
                                          class="form-control input first ">
                                        </div>
                                        <div *ngIf="vital==='Blood Presure'"
                                            class="form-group submit-group" >
                                            <label style="font-size:8px" for="piriod" class="labelss complain">DIASTOLIC</label>
                                            <input  (keyup)="clearVital('Blood Presure')"
                                            [(ngModel)]="session.vitals.bp.diastolic"
                                            type="number" [min]='1' name="dystolic"
                                            class="form-control input last" placeholder="mm Hg">
                                            <button class="btn btn-outline-primary">
                                              <i title = "Add Vital" (click)= addVital()
                                              class="icon ion-ios-plus-empty arrow "></i>
                                            </button>
                                        </div>
                                      </div>
                                      <div *ngIf="vital === 'Tempreture'" class="form-group submit-group">
                                        <label style="font-size:8px" for="piriod" class="labelss complain">TEMPRETURE</label>
                                        <input
                                            class="form-control input first"
                                            (keyup)="clearVital('Tempreture')"
                                            [(ngModel)]="session.vitals.tempreture.value"
                                            type="number" [min]='1'
                                            name="temp"
                                            placeholder="Degree Fahrenheit">
                                            <button class="btn btn-outline-primary">
                                              <i title = "Add Vital" (click)= addVital()
                                              class="icon ion-ios-plus-empty arrow "></i>
                                            </button>
                                      </div>
                                      <div *ngIf="vital === 'Pulse Rate'" class="form-group submit-group">
                                        <label style="font-size:8px" for="piriod" class="labelss complain">PULSE RATE</label>
                                        <input
                                          (keyup)="clearVital('Pulse Rate')"
                                          [(ngModel)]="session.vitals.pulse.value"
                                          type="number" [min]='1' name="pulse"
                                          class="form-control input first" placeholder="bpm">
                                        <button class="btn btn-outline-primary">
                                          <i title = "Add Vital" (click)= addVital()
                                          class="icon ion-ios-plus-empty arrow "></i>
                                        </button>
                                    </div>
                                    <div *ngIf="vital === 'Respiratory Rate'" class="form-group submit-group">
                                      <label style="font-size:8px" for="piriod" class="labelss complain">RESPIRATORY RATE</label>
                                      <input  type="number" [min]='1'
                                        (keyup)="clearVital('Respiratory Rate')"
                                        [(ngModel)]="session.vitals.resp.value"
                                        name="resp"
                                        class="form-control input first"
                                        placeholder="bpm">
                                      <button class="btn btn-outline-primary">
                                        <i title = "Add Vital" (click)= addVital()
                                        class="icon ion-ios-plus-empty arrow "></i>
                                      </button>
                                    </div>
                                    <div *ngIf='vitals.length && pageCount === 1' class="form-group vitals-section setGroup">
                                      <table cellspacing="0" class="data-table drugs-table" style="width:100%;left:0%;" summary="List of all items in store. ">
                                        <thead class='productHead'>
                                            <tr class="patient-th">
                                                <th style='padding: 4px;font-size:10px;color: #6c757d;font-weight:bold' class="headlbl patient-th">VITAL SIGN</th>
                                                <th style='padding: 4px;font-size:10px;text-align: right; color: #6c757d;font-weight:bold' class="headlbl patient-th">VALUE</th>
                                                <th style='padding: 4px;font-size:10px;color: #6c757d;' class="headlbl patient-th"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                          <tr style="border-bottom: 1px solid #f8f9fa;" *ngFor='let sign of vitals; let i = index; let odd = odd' class="ro patient-row">
                                              <td style="padding:0px;padding-left:4px;" class="data">
                                                  {{sign.name}}
                                              </td>
                                              <td style="padding:0px;text-align: right;padding-left:4px;" class="data">
                                                  {{sign.val}} </td>
                                              <td style='padding:0px; padding-left:3px;text-align: center' class="data">
                                                  <i (click)=removeVital(i,sign) class="icon ion-ios-trash-outline tableicon" title="Discard" style="font-size:15px; cursor: pointer;"></i>
                                              </td>
                                          </tr>
                                          </tbody>
                                        </table>
                                    </div>
                                    <button [disabled] = 'processing || !vitals.length' (click) = updateVitals() style=" width: 170px;font-size: 10px; height:27px;left:19%; bottom:-100%;" class="btn btn-sm btn-outline-primary mainbtn">UPDATE VITALS
                                        <span style="position: absolute; bottom: -100%;left: 19%;">
                                        <i *ngIf="processing" class="fa fa-circle-o-notch fa-spin fa-10x slow-spin " style="position:absolute;bottom:5px;left:5px;font-size:19px;color: #1da1f2;"> </i>
                                        </span>
                                    </button>
                                </form>
                            </div>
                            <div *ngIf = 'pageCount === 2' class="card-body orderbody" style=" width:55%; margin:auto;">
                                <div style="border-left:2px solid #1da1f2;height:290px; width:100%;">
                                    <div style='border:none' *ngFor="let invoices of invoices; let i = index" class="carditem priscriptioncontainer order">
                                        <div style='left:-3%' class="timeline condition drugtimeline">
                                            <p class="timelinedate">{{invoices[0]?.meta.dateAdded|date:'dd'}}</p>
                                            <p class="timelinedate month">{{invoices[0]?.meta.dateAdded|date:'MMM'|uppercase}}</p>
                                        </div>
                                        <div *ngFor="let invoice of invoices; let j = index" class="priscription drug">
                                        <h6 class="dept">{{invoice.name}}&nbsp;
                                            <span *ngIf="invoice.paid" class="predata priceval">
                                                <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                            </span>
                                            <span *ngIf="!invoice.paid" class="predata priceval">
                                                <i style=' color:lightgrey;'  *ngIf="invoice.meta.selected" class="icon ion-ios-checkmark-empty paid-icon" ></i>
                                                <div  style='border-color:rgb(228, 227, 227)'
                                                *ngIf ="!invoice.price" class="mycheckbox">
                                                </div>
                                                <div class="mycheckbox" *ngIf ="!invoice.meta.selected && invoice.price" >
                                                </div>
                                            </span>
                                        </h6>
                                        <h6 class="dept previnfo">Description&nbsp;
                                            <span class="predata">
                                            {{invoice.desc}}&nbsp;|&nbsp;</span>
                                            <span class="predata">{{invoice.meta.dateAdded|date:'hh:mma'|lowercase}}</span></h6>
                                        <h6 class="dept previnfo" style="color:lightgrey">Price&nbsp;
                                            <span [ngStyle]=getStyle(invoice) style="text-align:right;
                                            left:84%;display: inline-block;width:50px" *ngIf=invoice.price      class="predata priceval">{{invoice.price * invoice.quantity}}
                                            </span>
                                            <span *ngIf=!invoice.price class="predata priceval">---</span>
                                        </h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf='cardView.editing && pageCount === 0' style="left:7%; top:45%;position: absolute;
                            width: 7%;" class="btn-group disposition">
                            <button (click)="switchViews('orders')" style="width:32px;height: 32px;border-radius: 50%;left:35%"   class="btn btn-outline-primary  dispo shift-button" >
                                <i  style='position:absolute;right:36%;top:2px; font-size:large; cursor:pointer; display: inline-block;' title="Back" class="icon ion-android-arrow-back">
                                </i>
                            </button>
                        </div>
                        <div *ngIf='cardView.orders && pageCount === 0 && medSelected() ' style="left:80%; top:45%;position: absolute;
                        width: 7%;" class="btn-group disposition">
                            <button (click)=switchToEdit() style="width:32px;height: 32px;border-radius: 50%;left:35%"   class="btn btn-outline-primary  dispo shift-button" >
                                <i   style='position:absolute;right:36%;top:2px; font-size:large; cursor:pointer; display: inline-block;' title="Go to payment" class="icon ion-android-arrow-forward ">
                                </i>
                            </button>
                        </div>
                        <h6 *ngIf="successMsg" class="feedbackMsg">{{successMsg}}</h6>
                        <h6 *ngIf="errorMsg"  style="color: red" class="feedbackMsg">{{errorMsg}}</h6>
                    </div>
                </div>
            </div>
        </div>
    </div>


<div *ngIf="patients.length"  class="modal " role="dialog" tabindex="-1" id="vitalsModal" style="border-radius:32px;max-width:841px;margin: auto;padding-top: 35px">
        <div style="max-width: 730px;border-radius:32px;" class="modal-dialog" role="document">
            <div class="modal-content" style="width:100%; height:400px;border-radius:32px;padding-left:0px;padding-right: 0px;">
                <div class="modal-body" style="border-radius:32px;padding: 0px;">
                    <div class="card card-secondary historycard midlecard profilecard" style="margin:auto;min-height:400px;border-radius:32px;width:100%;position: absolute">
                        <div  data-dismiss="modal" style="height: 25px; width:25px; top:3%; cursor: pointer;  color: white(248, 248, 248); background:rgba(193, 193, 224, 0.2)" class="close-comment">
                            <i  title="close" class="icon ion-ios-close-empty"></i>
                        </div>
                        <div style='padding-left: 30px;border-top-right-radius:32px;border-top-left-radius:32px;border-bottom: 0px;height:40px;margin-bottom: 15px;' class="card-header profileheader small-header">
                            <div style="left:23px;top:13px" class="timeline lastdoc priscriber headerdp small-dp">
                                <img [src]=getDp(patients[curIndex].info.personal.avatar)/>
                            </div>
                            <p style="top:5px"  href="#" class="patien-name small-name">
                            {{patients[curIndex]?.info.personal.firstName + ' ' + patients[curIndex].info.personal.lastName}}<span class="small-headericon"></span>
                            </p>
                            <h6 style='font-size:11px; font-weight:bold; position:absolute;color:dodgerblue;top:5%;left:70%' class="patien-name small-name">VITALS</h6>
                        </div>
                    <div class="card-body orderbody" style="width:55%;margin:auto;">
                      <form *ngIf="count === 2"  style="top: 3%; height: 100%;width:60%;margin:auto;position: relative;" class=" ">
                        <div class="form-group">
                            <label style="font-size:8px" for="request" class="labelss">VITAL</label>
                            <select name="vital" id=select
                            [(ngModel)] = vital autocomplete="off"
                            class="form-control input">
                                <option>Blood Presure</option>
                                <option>Tempreture</option>
                                <option>Pulse Rate</option>
                                <option>Respiratory Rate</option>
                            </select>
                        </div>

                        <div class="group-wrap">
                          <div *ngIf="vital==='Blood Presure'"  class="form-group" >
                            <label style="font-size:8px" for="dos" class="labelss complain">SYSTOLIC</label>
                            <input (keyup)="clearVital('Blood Presure')"
                            [(ngModel)]="session.vitals.bp.systolic"
                            placeholder="mm Hg"   [min]='1'
                            type="number" name="systolic"
                            class="form-control input first ">
                          </div>
                          <div *ngIf="vital==='Blood Presure'"
                            class="form-group submit-group" >
                            <label style="font-size:8px" for="piriod" class="labelss complain">DIASTOLIC</label>
                            <input  (keyup)="clearVital('Blood Presure')"
                            [(ngModel)]="session.vitals.bp.diastolic"
                            type="number" [min]='1' name="dystolic"
                            class="form-control input last" placeholder="mm Hg">
                            <button class="btn btn-outline-primary">
                              <i title = "Add Vital" (click)= addVital()
                              class="icon ion-ios-plus-empty arrow "></i>
                            </button>
                          </div>
                        </div>
                        <div *ngIf="vital === 'Tempreture'" class="form-group submit-group">
                          <label style="font-size:8px" for="piriod" class="labelss complain">TEMPRETURE</label>
                          <input
                              class="form-control input first"
                              (keyup)="clearVital('Tempreture')"
                              [(ngModel)]="session.vitals.tempreture.value"
                              type="number" [min]='1'
                              name="temp"
                              placeholder="Degree Fahrenheit">
                              <button class="btn btn-outline-primary">
                                <i title = "Add Vital" (click)= addVital()
                                class="icon ion-ios-plus-empty arrow "></i>
                              </button>
                        </div>

                        <div *ngIf="vital === 'Pulse Rate'" class="form-group submit-group">
                              <label style="font-size:8px" for="piriod" class="labelss complain">PULSE RATE</label>
                              <input
                                (keyup)="clearVital('Pulse Rate')"
                                [(ngModel)]="session.vitals.pulse.value"
                                type="number" [min]='1' name="pulse"
                                class="form-control input first" placeholder="bpm">
                              <button class="btn btn-outline-primary">
                                <i title = "Add Vital" (click)= addVital()
                                class="icon ion-ios-plus-empty arrow "></i>
                              </button>
                        </div>
                        <div *ngIf="vital === 'Respiratory Rate'" class="form-group submit-group">
                            <label style="font-size:8px" for="piriod" class="labelss complain">RESPIRATORY RATE</label>
                            <input  type="number" [min]='1'
                              (keyup)="clearVital('Respiratory Rate')"
                              [(ngModel)]="session.vitals.resp.value"
                              name="resp"
                              class="form-control input first"
                              placeholder="bpm">
                            <button class="btn btn-outline-primary">
                              <i title = "Add Vital" (click)= addVital()
                              class="icon ion-ios-plus-empty arrow "></i>
                            </button>
                        </div>
                        <div *ngIf='vitals.length' class="form-group vitals-section setGroup">
                              <table cellspacing="0" class="data-table drugs-table" style="width:100%;left:0%;" summary="List of all items in store. ">
                                  <thead class='productHead'>
                                      <tr class="patient-th">
                                          <th class="headlbl patient-th items-head">VITAL SIGN</th>
                                          <th class="headlbl patient-th items-head">VALUE</th>
                                          <th class="headlbl patient-th items-head"></th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr style="border-bottom: 1px solid #f8f9fa;" *ngFor='let sign of vitals; let i = index; let odd = odd' class="ro patient-row">
                                          <td style="padding:0px;padding-left:4px;" class="data">
                                              {{sign.name}}
                                          </td>
                                          <td style="padding:0px;text-align: right;padding-left:4px;" class="data">
                                              {{sign.val}} </td>
                                          <td style='padding:0px; padding-left:3px;text-align: center' class="data">
                                              <i (click)=removeVital(i,sign) class="icon ion-ios-trash-outline tableicon" title="Discard" style="font-size:15px; cursor: pointer;"></i>
                                          </td>
                                      </tr>
                                  </tbody>
                              </table>
                          </div>
                            <button [disabled] = 'processing || !vitals.length' (click) = updateVitals() style=" width: 170px;font-size: 10px; height:27px;left:28%; bottom:24%;" class="btn btn-sm btn-outline-primary mainbtn">UPDATE VITALS
                                    <span style="position: absolute; bottom: -7%;left: 80%;">
                                    <i *ngIf="processing" class="fa fa-circle-o-notch fa-spin fa-10x slow-spin " style="position:absolute;bottom:5px;left:5px;font-size:19px;color: #1da1f2;"> </i>
                                    </span>
                                </button>
                    </form>
                        <!-- <form style="top:15%;" class=" staffsform">
                          <div class="group-wrap">
                            <div class="form-group ">
                              <label style='font-size:8px;left: 25px;top:-15%;' for="title" class="labelss complain">SELECT VITALS</label>
                              <select name="vital" [(ngModel)] = vital autocomplete="off" class=" patientdata status inputs dataInfo " name="bedno">
                                  <option>Blood Presure</option>
                                  <option>Tempreture</option>
                                  <option>Pulse Rate</option>
                                  <option>Respiratory Rate</option>
                              </select>
                            </div>
                          </div>

                                    <div *ngIf="vital==='Blood Presure'"  class="form-group vitals-section formGroup" style=" width:47%;margin-right: 5px;">
                                        <label style="font-size:8px" for="dos" class="labelss complain">SYSTOLIC</label>
                                        <input (keyup)="clearVital('Blood Presure')" [(ngModel)]="session.vitals.bp.systolic"  placeholder="mm Hg" [min]='1' type="number" name="systolic" class="form-control patientdata inputs dataInfo">
                                    </div>
                                    <div *ngIf="vital==='Blood Presure'" class="form-group vitals-section formGroup" style=" width:44%;">
                                        <label style="font-size:8px" for="piriod" class="labelss complain">DIASTOLIC</label>
                                        <input (keyup)="clearVital('Blood Presure')" [(ngModel)]="session.vitals.bp.diastolic" type="number" [min]='1' name="dystolic" class="form-control patientdata inputs dataInfo" placeholder="mm Hg">
                                        <div id='moreBtn'>
                                            <i style="left: 13%; top:-29%;" (click)="addVital()" class="icon ion-ios-plus-empty arrow "></i>
                                        </div>
                                    </div>
                                    <div *ngIf="vital === 'Tempreture'" style="width: 93%;"  class="form-group vitals-section formGroup">
                                            <label style="font-size:8px" for="piriod" class="labelss complain">TEMPRETURE</label>
                                            <input (keyup)="clearVital('Tempreture')"  [(ngModel)]="session.vitals.tempreture.value" type="number" [min]='1' name="temp" class="form-control patientdata inputs dataInfo" placeholder="Degree Fahrenheit">
                                            <div id='moreBtn'>
                                                <i style="left: 13%; top: -29%;" (click)="addVital()" class="icon ion-ios-plus-empty arrow "></i>
                                            </div>
                                    </div>
                                    <div *ngIf="vital === 'Pulse Rate'" style="width: 93%;"  class="form-group vitals-section formGroup">
                                            <label style="font-size:8px" for="piriod" class="labelss complain">PULSE RATE</label>
                                            <input (keyup)="clearVital('Pulse Rate')"  [(ngModel)]="session.vitals.pulse.value" type="number" [min]='1' name="pulse" class="form-control patientdata inputs dataInfo" placeholder="bpm">
                                            <div id='moreBtn'>
                                                <i style="left: 13%; top: -29%;" (click)="addVital()" class="icon ion-ios-plus-empty arrow "></i>
                                            </div>
                                    </div>
                                    <div *ngIf="vital === 'Respiratory Rate'" style="width: 93%;"  class="form-group vitals-section formGroup">
                                            <label style="font-size:8px" for="piriod" class="labelss complain">
                                                RESPIRATORY RATE
                                            </label>
                                            <input (keyup)="clearVital('Respiratory Rate')"  [(ngModel)]="session.vitals.resp.value" type="number" [min]='1' name="resp" class="form-control patientdata inputs dataInfo" placeholder="bpm">
                                            <div id='moreBtn'>
                                                <i style="left: 13%; top: -29%;" (click)= addVital() class="icon ion-ios-plus-empty arrow "></i>
                                            </div>
                                    </div>
                                    <div *ngIf='vitals.length' class="form-group vitals-section setGroup">
                                        <table cellspacing="0" class="data-table drugs-table" style="width:100%;left:0%;" summary="List of all items in store. ">
                                        <thead class='productHead'>
                                            <tr class="patient-th">
                                                <th style='padding: 4px;font-size:10px;color: #6c757d;font-weight:bold' class="headlbl patient-th">VITAL SIGN</th>
                                                <th style='padding: 4px;font-size:10px;text-align: right; color: #6c757d;font-weight:bold' class="headlbl patient-th">VALUE</th>
                                                <th style='padding: 4px;font-size:10px;color: #6c757d;' class="headlbl patient-th"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="border-bottom: 1px solid #f8f9fa;" *ngFor='let sign of vitals; let i = index; let odd = odd' class="ro patient-row">
                                                <td style="padding:0px;padding-left:4px;" class="data">
                                                    {{sign.name}}
                                                </td>
                                                <td style="padding:0px;text-align: right;padding-left:4px;" class="data">
                                                    {{sign.val}} </td>
                                                <td style='padding:0px; padding-left:3px;text-align: center' class="data">
                                                    <i (click)=removeVital(i,sign) class="icon ion-ios-trash-outline tableicon" title="Discard" style="font-size:15px; cursor: pointer;"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <button [disabled] = 'processing || !vitals.length' (click) = updateVitals() style=" width: 170px;font-size: 10px; height:27px;left:28%; bottom:24%;" class="btn btn-sm btn-outline-primary mainbtn">UPDATE VITALS
                                    <span style="position: absolute; bottom: -7%;left: 80%;">
                                    <i *ngIf="processing" class="fa fa-circle-o-notch fa-spin fa-10x slow-spin " style="position:absolute;bottom:5px;left:5px;font-size:19px;color: #1da1f2;"> </i>
                                    </span>
                                </button>
                            </form> -->
                        </div>
                        <!-- <div *ngIf='cardView.editing' style="left:7%; top:45%;position: absolute;
                            width: 7%;" class="btn-group disposition">
                            <button (click)="switchViews('orders')" style="width:32px;height: 32px;border-radius: 50%;left:35%"   class="btn btn-outline-primary  dispo shift-button" >
                                <i  style='position:absolute;right:36%;top:2px; font-size:large; cursor:pointer; display: inline-block;' title="Back" class="icon ion-android-arrow-back">
                                </i>
                            </button>
                        </div> -->
                        <!-- <div *ngIf='cardView.orders && medSelected()' style="left:80%; top:45%;position: absolute;
                        width: 7%;" class="btn-group disposition">
                            <button (click)=switchToEdit() style="width:32px;height: 32px;border-radius: 50%;left:35%"   class="btn btn-outline-primary  dispo shift-button" >
                                <i   style='position:absolute;right:36%;top:2px; font-size:large; cursor:pointer; display: inline-block;' title="Go to payment" class="icon ion-android-arrow-forward ">
                                </i>
                            </button>
                        </div> -->
                        <h6 *ngIf="successMsg" class="feedbackMsg">{{successMsg}}</h6>
                        <h6 *ngIf="errorMsg"  style="color: red" class="feedbackMsg">{{errorMsg}}</h6>
                    </div>
                </div>
            </div>
        </div>
    </div>









<header class="header-main">
  <nav>
    <div class="logo-box">
      <a href="/"><h1 class="logo">O</h1></a>
    </div>
    <div class="search-box">
      <form class='search__form'>
        <svg viewBox="0 0 24 24" class="search__icon">
          <g><path d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"></path></g>
        </svg>
        <input [(ngModel)]='searchTerm' #search (keyup)='searchPatient(searchTerm)' type="search" name="search" autocomplete="off" placeholder='Search Patient' class='form-control input search'>
      </form>
    </div>
    <div class="view-box">
      <div *ngIf=sortMenu  class="sort__options">
        <ul class='list__options' (mouseleave)='toggleSortMenu()'>
          <li (click)='sortPatients("A-Z")' class="action">A-Z</li>
          <li (click)='sortPatients("Age")' class="action">Age</li>
          <li (click)='sortPatients("Gender")' class="action">Gender</li>
          <li (click)='sortPatients("Date")' class="action">Date</li>
      </ul>
      </div>
      <h6>Sort:
        <span style='cursor:pointer' (click) ='toggleSortMenu()'>{{nowSorting}}</span>
      </h6>
      <div class="add__patient__box">

      </div>
    </div>
  </nav>
  <div (mouseleave) = hideLogOut() class="log__box">
    <div (click) ='showLogOut()' [ngStyle] = getBackgrounds() class="dp__box"></div>
    <div *ngIf="logout" class="log__out">
      <ul class='list__options'>
        <li (click)=logOut()>
            Log out
        </li>
    </ul>
    </div>
    <i (click) ='showLogOut()' class="icon ion-ios-arrow-down"></i>
  </div>
</header>
<div style="padding-top:60px"  class="container">
    <div style=position:absolute id="more" (click) = onScroll() ></div>
    <div class="row">
      <div *ngIf='!patients.length' class='issue'>
        <div *ngIf='loading'  class="spinner main"></div>
        <div (click)='refresh()' *ngIf='message' title='Refresh' class='refresh'><i class="icon ion-ios-reload "></i></div>
        <h6 *ngIf='message' style='font-size:13px;position:absolute;top:65%; width:100%; color:lightgrey;text-align: center' >{{message}}</h6>
      </div>
      <div *ngFor="let patient of patients; let i = index"  class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-xs-12">
        <div style="left: 62%" (mouseleave)='hideMenu()' *ngIf="patient.card.menu" class="menu">
          <ul (mouseleave)='hideMenu()' class="actions primary">
                <li (click)="switchCards(i,'dispose')" class="action">Room</li>
              <li (click)="selectPatient(i)" data-target="#medicModal" data-toggle="modal" class="action">Record</li>
          </ul>
        </div>
          <div (mouseenter) = showMoreIcon(i) (mouseleave) = hideMoreIcon(i) style="overflow: hidden;" class="card card-secondary maincard " >
              <div *ngIf="patient.card.view==='front'"  style='padding-left:30px; border-top-right-radius: 12px; border-top-left-radius: 12px;  padding-top: 0px;height: 32px;padding-bottom: 0px;' class="card-header profileheader">
                <div (click)='showMenu(i)' title="More" *ngIf="isWard() && patient.card.more" class="more-wrap">
                  <i class="icon ion-android-more-vertical"></i>
                </div>
              </div>
              <div *ngIf="patient.card.view ==='dispose'|| patient.card.view === 'ap'"  style='padding-left: 37px; border-top-right-radius: 12px; border-top-left-radius: 12px; padding-top: 0px;
              position:absolute;  width:100%;padding-bottom: 0px;height:32px' class="card-header profileheader small-header">
                  <i (click)="switchCards(i,'front')" style='position:absolute;
                        left:3%;top:4px; cursor:pointer;
                        display: inline-block;
                        color:#1da1f2;' title="Back" class="icon ion-android-arrow-back ">
                      </i>
                  <div style="left:23px;position: absolute;" class="timeline lastdoc priscriber headerdp small-dp">
                      <img [src]='getDp(patient.info.personal.avatar)'/>
                  </div>
                  <p style="top:6px;margin-bottom:0px;position: absolute;" class="patien-name small-name">
                      {{patient.info.personal.firstName + ' '+ patient.info.personal.lastName}}<span class="small-headericon"></span>
                  </p>
              </div>
              <div [class.up]='patient.card.sucsMsg' [class.down]='!patient.card.sucsMsg'
              style='padding-left: 5px;padding-right:5px;border-top-right-radius: 0px; border-top-left-radius: 0px; z-index: 5; padding-top: 0px; border-top: 1px solid whitesmoke;
              position:absolute;width:100%;padding-bottom: 0px;height:32px' class="card-header profileheader small-header sucsLine">
                  <p *ngIf='patient.card.sucsMsg' style="top:6px;margin-bottom:0px;padding:0px;margin-right:0px; font-weight:normal;position:absolute;text-align:center;width:95%;color:lightgreen" class="patien-name small-name">
                      {{patient.card.sucsMsg}}
                  </p>
                  <p *ngIf='patient.card.errorMsg'
                      style="top:6px;margin-bottom:0px;padding:0px;
                      margin-right:0px; font-weight:normal;position:absolute;
                      text-align:center;width:95%;color:red"
                      class="patien-name small-name">
                      {{patient.card.errorMsg}}
                  </p>
              </div>
              <div [class.ap]='cardCount' [class.front]='patient.card.view==="front"' style="position: absolute; width:100%;height: 87%;top:13%" class="card-body mainbody">
                  <div style="position: relative;margin-bottom: 0px;top:0px" class="timeline lastdoc priscriber headerdp">
                      <img  [src]='getDp(patient.info.personal.avatar)'/>
                      <div *ngIf="patient.card.indicate" class="indicator"></div>
                  </div>
                  <p style='margin-bottom:2px;position:relative;top:3px' class="patien-name">
                    {{patient.info.personal.firstName + ' '+ patient.info.personal.lastName}}
                  </p>
                  <div>
                      <div style="position: relative;top:12px" class="carditem basic-item">
                          <h6 class="dept basic-info">Sex</h6>
                          <h6 class="dept basic-info sex-info">
                              {{patient.info.personal.gender.charAt(0).toUpperCase()}}
                          </h6>
                      </div>
                      <div style="position: relative;top:12px" class="carditem basic-item">
                          <h6 class="dept basic-info">Age</h6>
                          <h6 class="dept basic-info sex-info">{{patient.info.personal.dob|dob}}</h6>
                      </div>
                      <div style="position: relative;top:12px" class="carditem basic-item">
                          <h6 class="dept basic-info">Room</h6>
                          <h6 class="dept basic-info sex-info">{{patient.record.visits[0][0].wardNo ||'?'}}</h6>
                      </div>
                  </div>
                  <h6 style="width:100%;position:relative;text-align:center" class="dept basic-secondary basic-value">{{patient.record.visits[0][0].visitedOn|date:'dd MMM, y'}}&nbsp;
                      <span>{{patient.record.visits[0][0].visitedOn | date:'hh:mma'|lowercase}}</span>
                  </h6>
              </div>
              <div  [class.on]='patient.card.view === "dispose"'  style="position:absolute; width:100%;height: 87%;top:13%;background:white;border-bottom-right-radius: 12px;border-bottom-left-radius: 12px;margin-left:0px;border:none;padding-top: 0px;" class="card-body off">
                    <form style="top:19%;position:absolute;width:100%; padding-left: 4%; padding-right: 6%;" class=" staffsform">
                        <div style=" margin-top:2px;   " class="form-group vitals-section formGroup">
                            <label style='font-size:8px;left: 25px;top:-15%;' for="title" class="labelss complain">SELECT ROOM</label>
                            <select [(ngModel)]="patients[i].record.visits[0][0].wardNo" class=" patientdata status inputs dataInfo " name="bedno">
                                <option *ngFor = "let room of getRooms(i)">{{room.number}}</option>
                            </select>
                        </div>
                    </form>
                    <button [disabled]='patient.card.procesing' (click)=allocateRoom(i)  style=" width: 170px;font-size: 10px; height:27px;left:15%; bottom:36%;" class="btn btn-sm btn-outline-primary  mainbtn"><span style="position: absolute; bottom: -7%;left: 5%;">
                        <i *ngIf='patient.card.procesing'  class="fa fa-circle-o-notch fa-spin fa-10x slow-spin " style="position:absolute;bottom:5px;left:5px;font-size:19px;color: #1da1f2;"> </i>
                    </span>ALLOCATE ROOM</button>
                </div>


              <div [class.on]='patient.card.view==="ap"' style="position: absolute; width:100%;height: 87%;top:22%;background:white;border-bottom-right-radius: 12px;
                border-bottom-left-radius: 12px; margin-left:0px;border:none;padding-top: 0px;" class="card-body off">
                    <form style="top:-4%;position:absolute;width:100%; padding-left: 6%; padding-right: 6%;" class=" staffsform">

                    </form>
                    <button [disabled]='patient.card.procesing' style=" width: 170px;font-size: 10px; height:27px;left:15%; bottom:23%;" class="btn btn-sm btn-outline-primary  mainbtn"><span style="position: absolute; bottom: -7%;left: 5%;">
                        <i *ngIf='patient.card.procesing'  class="fa fa-circle-o-notch fa-spin fa-10x slow-spin " style="position:absolute;bottom:5px;left:5px;font-size:19px;color: #1da1f2;"> </i>
                    </span>UPDATE VITALS
                    </button>
                </div>
        </div>
    </div>
</div>

